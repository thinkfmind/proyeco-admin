{"ast":null,"code":"var _jsxFileName = \"/Users/augusto/Desktop/proyeco-front/src/views/equipment/activity/historic/create.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState, useCallback } from \"react\";\nimport axios from \"axios\";\nimport toast, { Toaster } from \"react-hot-toast\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { ChevronLeftIcon, DocumentDownloadIcon, TrashIcon } from \"@heroicons/react/outline\";\nimport { useSelector } from \"react-redux\";\nimport InputDataList from \"../../../../components/form/textInput/datalist\";\nimport TextInput from \"../../../../components/form/textInput\";\nimport { useDropzone } from \"react-dropzone\";\nimport ItemSelectorWithIcon from \"../../../../components/form/itemSelectorWithIcon\";\nimport Navbar from \"../../../../@app/navbar\";\nimport Table from \"../table\";\nimport Alert from \"../../../../components/alert\";\nimport { backendUrl } from \"../../../../config\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst EquipmentCreate = () => {\n  _s();\n\n  const userSelector = useSelector(store => store.user);\n  const [data, setData] = useState([]);\n  const [nameEquipo, setNameEquipo] = useState(\"\");\n  const [nameEquipoError, setNameEquipoError] = useState(false);\n  const [linea, setLinea] = useState(\"\");\n  const [lineaError, setLineaError] = useState(false);\n  const [estacion, setEstacion] = useState(\"\");\n  const [estacionError, setEstacionError] = useState(false);\n  const [empresa, setEmpresa] = useState(\"\");\n  const [empresaId, setEmpresaId] = useState(\"\");\n  const [empresaError, setEmpresaError] = useState(false);\n  const [dataLineas, setDataLineas] = useState([]);\n  const [dataEquipos, setDataEquipos] = useState([]);\n  const [dataEstaciones, setDataEstaciones] = useState([]);\n  const [dataList, setDataList] = useState([]);\n  const [dataListEquipo, setDataListEquipo] = useState([]);\n  const [successAlert, setSuccessAlert] = useState(false);\n  const [file, setFile] = useState([]);\n  let history = useHistory();\n  const onDrop = useCallback(acceptedFiles => {\n    setFile([...file, ...acceptedFiles]);\n  }, [file]);\n  const {\n    getRootProps,\n    getInputProps\n  } = useDropzone({\n    onDrop,\n    multiple: false,\n    accept: \"application/pdf\"\n  });\n  const files = file.map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: file.path\n  }, file.path, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this));\n\n  const deleteFile = () => {\n    setFile([]);\n  };\n\n  const onChangeNameEquipo = value => {\n    setNameEquipo(value);\n    setNameEquipoError(false);\n    const result = dataEquipos.filter(equipo => {\n      return equipo.identificacion === value;\n    });\n    setEmpresa(result.length > 0 ? result[0].empresa.name : \"\");\n    setEmpresaId(result.length > 0 ? result[0].empresa.id : \"\");\n  };\n\n  const successAlertHandler = () => {\n    setSuccessAlert(true);\n    setTimeout(() => {\n      setSuccessAlert(false);\n      history.push(\"/equipment/activity\");\n    }, 1500);\n  };\n\n  const onSubmit = async () => {\n    const toastLoading = toast.loading(\"Cargando...\");\n    let errNameEquipo = false;\n    let errLinea = false;\n    let errEstacion = false;\n    let errEmpresa = false;\n\n    if (nameEquipo.length < 1) {\n      setNameEquipoError(true);\n      errNameEquipo = true;\n    }\n\n    if (linea.length < 1) {\n      setLineaError(true);\n      errLinea = true;\n    }\n\n    if (estacion.length < 1) {\n      setEstacionError(true);\n      errEstacion = true;\n    }\n\n    if (empresa.length < 1) {\n      setEmpresaError(true);\n      errEmpresa = true;\n    }\n\n    if (!errNameEquipo && !errLinea && !errEstacion && !errEmpresa) {\n      try {\n        const formData = new FormData();\n        formData.append(\"equipo\", nameEquipo);\n        formData.append(\"linea\", linea);\n        formData.append(\"estacion\", estacion);\n        formData.append(\"empresa\", empresaId);\n        formData.append(\"pdf\", file[0]);\n        await axios({\n          method: \"POST\",\n          url: `${backendUrl}/historico`,\n          data: formData,\n          headers: {\n            Authorization: `Bearer ${userSelector.user.jwtToken}`,\n            \"Content-Type\": \"multipart/form-data boundary=\" + Math.random().toString().substr(2)\n          }\n        });\n        setNameEquipo(\"\");\n        setLinea(\"\");\n        setEstacion(\"\");\n        setEmpresa(\"\");\n        toast.dismiss(toastLoading);\n        successAlertHandler();\n      } catch {\n        toast.dismiss(toastLoading);\n        toast.error(\"Error al cargar el equipo!\");\n      }\n    }\n\n    toast.dismiss(toastLoading);\n  };\n\n  const [refreshEstacion, setRefreshEstacion] = useState(\"\");\n\n  const handleSelectLinea = value => {\n    setNameEquipo(\"\"); // para borrar el nombre de equipo alc ambiar linea\n\n    const result = dataEstaciones.filter(estacion => {\n      return estacion.linea === value;\n    });\n    setLinea(value);\n    setEstacion(\"\");\n    setRefreshEstacion(result);\n  };\n\n  const dumb = () => {};\n\n  const handleSelectEstacion = value => {\n    setEstacion(value);\n    setNameEquipo(\"\"); // para borrar el nombre de equipo alc ambiar estacion\n\n    const result = dataEquipos.filter(equipo => {\n      return equipo.estacion.id === value;\n    });\n    setDataListEquipo(result);\n  };\n\n  const sendToTrash = async id => {\n    console.log(id);\n    const toastLoading = toast.loading(\"Cargando...\");\n\n    try {\n      await axios({\n        method: \"PUT\",\n        url: `${backendUrl}/actividad/trash/${id}`,\n        data: {\n          state: true\n        },\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`\n        }\n      });\n      getActivityData();\n      toast.dismiss(toastLoading);\n      toast.success(\"Registro enviado a la papelera!\");\n    } catch {\n      toast.dismiss(toastLoading);\n      toast.error(\"Error al enviar a la papelera!\");\n    }\n  };\n\n  const [activityData, setActivityData] = useState([]);\n\n  const getActivityData = async () => {\n    const toastLoading = toast.loading(\"Cargando...\");\n\n    try {\n      const res = await axios.get(`${backendUrl}/actividad`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`\n        }\n      });\n      setActivityData(res.data);\n      toast.dismiss(toastLoading);\n    } catch (e) {\n      toast.dismiss(toastLoading);\n    }\n  };\n\n  const consult = async () => {\n    const toastLoading = toast.loading(\"Cargando...\");\n\n    try {\n      const res = await axios.get(`${backendUrl}/user/`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`\n        }\n      });\n      const res2 = await axios.get(`${backendUrl}/linea/`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`\n        }\n      });\n      const res3 = await axios.get(`${backendUrl}/estacion/`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`\n        }\n      });\n      const res4 = await axios.get(`${backendUrl}/equipo/`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`\n        }\n      });\n      const res7 = await axios.get(`${backendUrl}/actividad`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`\n        }\n      });\n      setActivityData(res7.data);\n      const sanitize = res.data.filter(user => {\n        return user.role === \"Empresa\";\n      });\n      setData(sanitize);\n      setDataLineas(res2.data);\n      setDataEstaciones(res3.data);\n      setDataEquipos(res4.data);\n      toast.dismiss(toastLoading);\n    } catch {\n      toast.dismiss(toastLoading);\n      toast.error(\"Error al conectarse al servidor!\");\n    }\n  };\n\n  useEffect(() => {\n    consult();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [successAlert ? /*#__PURE__*/_jsxDEV(Alert, {\n      text: \"Historico cargado\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 23\n    }, this) : null, /*#__PURE__*/_jsxDEV(Toaster, {\n      position: \"top-right\",\n      reverseOrder: false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Navbar, {\n      title: \"Registro de mantenimiento\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-20 pb-20 vp-desktop\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-end justify-end mt-14\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/equipment/activity\",\n            children: /*#__PURE__*/_jsxDEV(ChevronLeftIcon, {\n              className: \"w-5 h-5 mr-2 text-gray-700\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            className: \"font-objetive-medium\",\n            to: \"/equipment/activity\",\n            children: \"Volver\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative w-full px-10 pt-10 pb-24 mt-6 bg-gray-100 rounded-3xl\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"mb-6 text-xl font-objetive-bold\",\n          children: \"Cargar PDF datos hist\\xF3rico\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1 pr-6\",\n              children: /*#__PURE__*/_jsxDEV(ItemSelectorWithIcon, {\n                data: dataLineas,\n                text: \"L\\xEDnea\",\n                eventHandler: handleSelectLinea,\n                value: linea\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1 pr-6\",\n              children: /*#__PURE__*/_jsxDEV(ItemSelectorWithIcon, {\n                data: refreshEstacion,\n                text: \"Estacion\",\n                eventHandler: handleSelectEstacion,\n                value: estacion\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 pl-14\",\n            children: /*#__PURE__*/_jsxDEV(InputDataList, {\n              placeholder: \"Nombre del equipo\",\n              error: nameEquipoError,\n              eventHandler: onChangeNameEquipo,\n              disabled: estacion ? false : true,\n              data: dataListEquipo,\n              not: \"No hay equipos cargados en la estaci\\xF3n seleccionada\",\n              id: \"empresaselect\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex mt-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 pr-14\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-5/6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pl-2 mb-4 font-objetive-medium\",\n                children: \"Mantenimiento a cargo de\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n                placeholder: \"Empresa\",\n                error: empresaError,\n                eventHandler: dumb,\n                value: empresa,\n                disabled: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col flex-1 mt-4 ml-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", { ...getRootProps({\n                className: \"dropzone\"\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"input\", { ...getInputProps()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center mr-10 cursor-pointer\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-20 h-20 flex justify-center align-middle content-center items-center bg-gray-300 rounded-xl\",\n                  children: /*#__PURE__*/_jsxDEV(DocumentDownloadIcon, {\n                    className: \"w-10 h-10 text-gray-700\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 325,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 324,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ml-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"underline font-objetive-bold text-app-violet-300\",\n                    children: \"Seleccionar pdf\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 328,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                    className: \"text-sm text-gray-700 font-objetive-regular w-52\",\n                    children: files.length > 0 ? files : \"No se selecciono un pdf\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 331,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 15\n            }, this), files.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: deleteFile,\n              className: \"flex items-center justify-center w-20 h-5 mt-2 bg-red-600 cursor-pointer rounded-xl\",\n              children: /*#__PURE__*/_jsxDEV(TrashIcon, {\n                className: \"w-4 h-4 text-white\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 17\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onSubmit,\n          type: \"button\",\n          className: \"absolute inline-flex items-center px-4 pt-4 pb-3 text-base text-white border border-transparent rounded-full shadow-sm bottom--20 right-32 font-objetive-medium bg-app-purple-btn hover:bg-red-500 focus:outline-none \",\n          children: \"Guardar y cargar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-20\",\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          data: activityData,\n          sendToTrash: sendToTrash\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(EquipmentCreate, \"5U/oPQD7oIVABqgn9nTTn/eYuNY=\", false, function () {\n  return [useSelector, useHistory, useDropzone];\n});\n\n_c = EquipmentCreate;\nexport default EquipmentCreate;\n\nvar _c;\n\n$RefreshReg$(_c, \"EquipmentCreate\");","map":{"version":3,"sources":["/Users/augusto/Desktop/proyeco-front/src/views/equipment/activity/historic/create.js"],"names":["useEffect","useState","useCallback","axios","toast","Toaster","Link","useHistory","ChevronLeftIcon","DocumentDownloadIcon","TrashIcon","useSelector","InputDataList","TextInput","useDropzone","ItemSelectorWithIcon","Navbar","Table","Alert","backendUrl","EquipmentCreate","userSelector","store","user","data","setData","nameEquipo","setNameEquipo","nameEquipoError","setNameEquipoError","linea","setLinea","lineaError","setLineaError","estacion","setEstacion","estacionError","setEstacionError","empresa","setEmpresa","empresaId","setEmpresaId","empresaError","setEmpresaError","dataLineas","setDataLineas","dataEquipos","setDataEquipos","dataEstaciones","setDataEstaciones","dataList","setDataList","dataListEquipo","setDataListEquipo","successAlert","setSuccessAlert","file","setFile","history","onDrop","acceptedFiles","getRootProps","getInputProps","multiple","accept","files","map","path","deleteFile","onChangeNameEquipo","value","result","filter","equipo","identificacion","length","name","id","successAlertHandler","setTimeout","push","onSubmit","toastLoading","loading","errNameEquipo","errLinea","errEstacion","errEmpresa","formData","FormData","append","method","url","headers","Authorization","jwtToken","Math","random","toString","substr","dismiss","error","refreshEstacion","setRefreshEstacion","handleSelectLinea","dumb","handleSelectEstacion","sendToTrash","console","log","state","getActivityData","success","activityData","setActivityData","res","get","e","consult","res2","res3","res4","res7","sanitize","role","className"],"mappings":"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","sourcesContent":["import { useEffect, useState, useCallback } from \"react\";\nimport axios from \"axios\";\nimport toast, { Toaster } from \"react-hot-toast\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport {\n  ChevronLeftIcon,\n  DocumentDownloadIcon,\n  TrashIcon\n} from \"@heroicons/react/outline\";\nimport { useSelector } from \"react-redux\";\nimport InputDataList from \"../../../../components/form/textInput/datalist\";\nimport TextInput from \"../../../../components/form/textInput\";\nimport { useDropzone } from \"react-dropzone\";\nimport ItemSelectorWithIcon from \"../../../../components/form/itemSelectorWithIcon\";\nimport Navbar from \"../../../../@app/navbar\";\nimport Table from \"../table\";\nimport Alert from \"../../../../components/alert\";\nimport { backendUrl } from \"../../../../config\";\n\nconst EquipmentCreate = () => {\n  const userSelector = useSelector((store) => store.user);\n  const [data, setData] = useState([]);\n  const [nameEquipo, setNameEquipo] = useState(\"\");\n  const [nameEquipoError, setNameEquipoError] = useState(false);\n  const [linea, setLinea] = useState(\"\");\n  const [lineaError, setLineaError] = useState(false);\n  const [estacion, setEstacion] = useState(\"\");\n  const [estacionError, setEstacionError] = useState(false);\n  const [empresa, setEmpresa] = useState(\"\");\n  const [empresaId, setEmpresaId] = useState(\"\");\n  const [empresaError, setEmpresaError] = useState(false);\n  const [dataLineas, setDataLineas] = useState([]);\n  const [dataEquipos, setDataEquipos] = useState([]);\n  const [dataEstaciones, setDataEstaciones] = useState([]);\n  const [dataList, setDataList] = useState([]);\n  const [dataListEquipo, setDataListEquipo] = useState([]);\n  const [successAlert, setSuccessAlert] = useState(false);\n  const [file, setFile] = useState([]);\n  let history = useHistory();\n\n\n\n  const onDrop = useCallback(acceptedFiles => {\n    setFile([...file, ...acceptedFiles])\n  }, [file])\n\n  const { getRootProps, getInputProps } = useDropzone({\n    onDrop,\n    multiple: false,\n    accept: \"application/pdf\",\n  });\n\n  const files = file.map((file) => (\n    <div key={file.path}>{file.path}</div>\n  ));\n\n  const deleteFile = () => {\n    setFile([])\n  };\n\n  const onChangeNameEquipo = (value) => {\n    setNameEquipo(value);\n    setNameEquipoError(false);\n\n    const result = dataEquipos.filter((equipo) => {\n      return equipo.identificacion === value;\n    });\n\n    setEmpresa(result.length > 0 ? result[0].empresa.name : \"\");\n    setEmpresaId(result.length > 0 ? result[0].empresa.id : \"\");\n  };\n\n  const successAlertHandler = () => {\n    setSuccessAlert(true);\n    setTimeout(() => {\n      setSuccessAlert(false);\n      history.push(\"/equipment/activity\");\n    }, 1500);\n  };\n\n  const onSubmit = async () => {\n    const toastLoading = toast.loading(\"Cargando...\");\n    let errNameEquipo = false;\n    let errLinea = false;\n    let errEstacion = false;\n    let errEmpresa = false;\n\n    if (nameEquipo.length < 1) {\n      setNameEquipoError(true);\n      errNameEquipo = true;\n    }\n\n    if (linea.length < 1) {\n      setLineaError(true);\n      errLinea = true;\n    }\n\n    if (estacion.length < 1) {\n      setEstacionError(true);\n      errEstacion = true;\n    }\n\n    if (empresa.length < 1) {\n      setEmpresaError(true);\n      errEmpresa = true;\n    }\n\n    if (!errNameEquipo && !errLinea && !errEstacion && !errEmpresa) {\n      try {\n        const formData = new FormData();\n        formData.append(\"equipo\", nameEquipo);\n        formData.append(\"linea\", linea);\n        formData.append(\"estacion\", estacion);\n        formData.append(\"empresa\", empresaId);\n        formData.append(\"pdf\", file[0]);\n\n        await axios({\n          method: \"POST\",\n          url: `${backendUrl}/historico`,\n          data: formData,\n          headers: {\n            Authorization: `Bearer ${userSelector.user.jwtToken}`,\n            \"Content-Type\":\n              \"multipart/form-data boundary=\" +\n              Math.random().toString().substr(2),\n          },\n        });\n        setNameEquipo(\"\");\n        setLinea(\"\");\n        setEstacion(\"\");\n        setEmpresa(\"\");\n        toast.dismiss(toastLoading);\n        successAlertHandler();\n      } catch {\n        toast.dismiss(toastLoading);\n        toast.error(\"Error al cargar el equipo!\");\n      }\n    }\n    toast.dismiss(toastLoading);\n  };\n\n  const [refreshEstacion, setRefreshEstacion] = useState(\"\");\n\n  const handleSelectLinea = (value) => {\n    setNameEquipo(\"\"); // para borrar el nombre de equipo alc ambiar linea\n    const result = dataEstaciones.filter((estacion) => {\n      return estacion.linea === value;\n    });\n    setLinea(value);\n    setEstacion(\"\");\n    setRefreshEstacion(result);\n  };\n\n  const dumb = () => {};\n\n  const handleSelectEstacion = (value) => {\n    setEstacion(value);\n    setNameEquipo(\"\"); // para borrar el nombre de equipo alc ambiar estacion\n    const result = dataEquipos.filter((equipo) => {\n      return equipo.estacion.id === value;\n    });\n    setDataListEquipo(result);\n  };\n\n  const sendToTrash = async (id) => {\n    console.log(id);\n    const toastLoading = toast.loading(\"Cargando...\");\n    try {\n      await axios({\n        method: \"PUT\",\n        url: `${backendUrl}/actividad/trash/${id}`,\n        data: { state: true },\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`,\n        },\n      });\n      getActivityData();\n      toast.dismiss(toastLoading);\n      toast.success(\"Registro enviado a la papelera!\");\n    } catch {\n      toast.dismiss(toastLoading);\n      toast.error(\"Error al enviar a la papelera!\");\n    }\n  };\n\n  const [activityData, setActivityData] = useState([]);\n  const getActivityData = async () => {\n    const toastLoading = toast.loading(\"Cargando...\");\n    try {\n      const res = await axios.get(`${backendUrl}/actividad`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`,\n        },\n      });\n      setActivityData(res.data);\n      toast.dismiss(toastLoading);\n    } catch (e) {\n      toast.dismiss(toastLoading);\n    }\n  };\n\n  const consult = async () => {\n    const toastLoading = toast.loading(\"Cargando...\");\n    try {\n      const res = await axios.get(`${backendUrl}/user/`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`,\n        },\n      });\n      const res2 = await axios.get(`${backendUrl}/linea/`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`,\n        },\n      });\n      const res3 = await axios.get(`${backendUrl}/estacion/`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`,\n        },\n      });\n      const res4 = await axios.get(`${backendUrl}/equipo/`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`,\n        },\n      });\n\n      const res7 = await axios.get(`${backendUrl}/actividad`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`,\n        },\n      });\n\n      setActivityData(res7.data);\n\n      const sanitize = res.data.filter((user) => {\n        return user.role === \"Empresa\";\n      });\n\n      setData(sanitize);\n      setDataLineas(res2.data);\n      setDataEstaciones(res3.data);\n      setDataEquipos(res4.data);\n      toast.dismiss(toastLoading);\n    } catch {\n      toast.dismiss(toastLoading);\n      toast.error(\"Error al conectarse al servidor!\");\n    }\n  };\n\n  useEffect(() => {\n    consult();\n  }, []);\n\n  return (\n    <>\n      {successAlert ? <Alert text=\"Historico cargado\" /> : null}\n      <Toaster position=\"top-right\" reverseOrder={false} />\n      <Navbar title=\"Registro de mantenimiento\" />\n      <div className=\"px-20 pb-20 vp-desktop\">\n        <div className=\"flex items-end justify-end mt-14\">\n          <div className=\"flex\">\n            <Link to=\"/equipment/activity\">\n              <ChevronLeftIcon className=\"w-5 h-5 mr-2 text-gray-700\" />\n            </Link>\n            <Link className=\"font-objetive-medium\" to=\"/equipment/activity\">\n              Volver\n            </Link>\n          </div>\n        </div>\n        <div className=\"relative w-full px-10 pt-10 pb-24 mt-6 bg-gray-100 rounded-3xl\">\n          <h1 className=\"mb-6 text-xl font-objetive-bold\">\n            Cargar PDF datos histórico\n          </h1>\n          <div className=\"flex\">\n            <div className=\"flex flex-1\">\n              <div className=\"flex-1 pr-6\">\n                <ItemSelectorWithIcon\n                  data={dataLineas}\n                  text=\"Línea\"\n                  eventHandler={handleSelectLinea}\n                  value={linea}\n                />\n              </div>\n              <div className=\"flex-1 pr-6\">\n                <ItemSelectorWithIcon\n                  data={refreshEstacion}\n                  text=\"Estacion\"\n                  eventHandler={handleSelectEstacion}\n                  value={estacion}\n                />\n              </div>\n            </div>\n            <div className=\"flex-1 pl-14\">\n              <InputDataList\n                placeholder=\"Nombre del equipo\"\n                error={nameEquipoError}\n                eventHandler={onChangeNameEquipo}\n                disabled={estacion ? false : true}\n                data={dataListEquipo}\n                not=\"No hay equipos cargados en la estación seleccionada\"\n                id=\"empresaselect\"\n              />\n            </div>\n          </div>\n\n          <div className=\"flex mt-8\">\n            <div className=\"flex-1 pr-14\">\n              <div className=\"w-5/6\">\n                <div className=\"pl-2 mb-4 font-objetive-medium\">\n                  Mantenimiento a cargo de\n                </div>\n                <TextInput\n                  placeholder=\"Empresa\"\n                  error={empresaError}\n                  eventHandler={dumb}\n                  value={empresa}\n                  disabled={true}\n                />\n              </div>\n            </div>\n            <div className=\"flex flex-col flex-1 mt-4 ml-2\">\n              <div {...getRootProps({ className: \"dropzone\" })}>\n                <input {...getInputProps()} />\n                <div className=\"flex items-center mr-10 cursor-pointer\">\n                  <div className=\"w-20 h-20 flex justify-center align-middle content-center items-center bg-gray-300 rounded-xl\">\n                    <DocumentDownloadIcon className=\"w-10 h-10 text-gray-700\" />\n                  </div>\n                  <div className=\"ml-2\">\n                    <h3 className=\"underline font-objetive-bold text-app-violet-300\">\n                      Seleccionar pdf\n                    </h3>\n                    <h4 className=\"text-sm text-gray-700 font-objetive-regular w-52\">\n                      {files.length > 0 ? files : \"No se selecciono un pdf\"}\n                    </h4>\n                  </div>\n                </div>\n              </div>\n              {files.length > 0 ? (\n                <div\n                  onClick={deleteFile}\n                  className=\"flex items-center justify-center w-20 h-5 mt-2 bg-red-600 cursor-pointer rounded-xl\"\n                >\n                  <TrashIcon className=\"w-4 h-4 text-white\" />\n                </div>\n              ) : null}\n            </div>\n          </div>\n\n          <button\n            onClick={onSubmit}\n            type=\"button\"\n            className=\"absolute inline-flex items-center px-4 pt-4 pb-3 text-base text-white border border-transparent rounded-full shadow-sm bottom--20 right-32 font-objetive-medium bg-app-purple-btn hover:bg-red-500 focus:outline-none \"\n          >\n            Guardar y cargar\n          </button>\n        </div>\n\n        <div className=\"mt-20\">\n          <Table data={activityData} sendToTrash={sendToTrash} />\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default EquipmentCreate;\n"]},"metadata":{},"sourceType":"module"}