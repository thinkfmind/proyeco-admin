{"ast":null,"code":"var _jsxFileName = \"/Users/augusto/Desktop/proyeco-front/src/views/equipment/activity/historic/edit.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState, useCallback } from \"react\";\nimport axios from \"axios\";\nimport toast, { Toaster } from \"react-hot-toast\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { ChevronLeftIcon, DocumentDownloadIcon, TrashIcon } from \"@heroicons/react/outline\";\nimport { useSelector } from \"react-redux\";\nimport InputDataList from \"../../../../components/form/textInput/datalist\";\nimport ItemSelector from \"../../../../components/form/itemSelector\";\nimport { useDropzone } from \"react-dropzone\";\nimport ItemSelectorWithIcon from \"../../../../components/form/itemSelectorWithIcon\";\nimport Navbar from \"../../../../@app/navbar\";\nimport Alert from \"../../../../components/alert\";\nimport Table from \"../table\";\nimport { backendUrl } from \"../../../../config\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst EquipmentCreate = props => {\n  _s();\n\n  const {\n    id\n  } = props.location.state;\n  const userSelector = useSelector(store => store.user);\n  const [data, setData] = useState([]);\n  const [nameEquipo, setNameEquipo] = useState(\"\");\n  const [nameEquipoError, setNameEquipoError] = useState(false);\n  const [linea, setLinea] = useState(\"\");\n  const [lineaError, setLineaError] = useState(false);\n  const [estacion, setEstacion] = useState(\"\");\n  const [estacionError, setEstacionError] = useState(false);\n  const [empresa, setEmpresa] = useState(\"\");\n  const [empresaId, setEmpresaId] = useState(\"\");\n  const [empresaError, setEmpresaError] = useState(false);\n  const [dataLineas, setDataLineas] = useState([]);\n  const [dataEquipos, setDataEquipos] = useState([]);\n  const [dataEstaciones, setDataEstaciones] = useState([]);\n  const [successAlert, setSuccessAlert] = useState(false);\n  const [dataList, setDataList] = useState([]);\n  const [dataListEquipo, setDataListEquipo] = useState([]);\n  const [uploadadFile, setUploadadFile] = useState(\"\");\n  const [file, setFile] = useState([]);\n  let history = useHistory();\n  const onDrop = useCallback(acceptedFiles => {\n    setFile([...file, ...acceptedFiles]);\n  }, [file]);\n  const {\n    getRootProps,\n    getInputProps\n  } = useDropzone({\n    onDrop,\n    multiple: false,\n    accept: \"application/pdf\"\n  });\n  const files = file.map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: file.path\n  }, file.path, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 36\n  }, this));\n\n  const deleteFile = () => {\n    setUploadadFile(\"\");\n    setFile([]);\n  };\n\n  const onChangeNameEquipo = value => {\n    setNameEquipo(value);\n    setNameEquipoError(false);\n    const result = dataEquipos.filter(equipo => {\n      return equipo.identificacion === value;\n    });\n    setEmpresa(result.length > 0 ? result[0].empresa.name : \"\");\n    setEmpresaId(result.length > 0 ? result[0].empresa.id : \"\");\n  };\n\n  const successAlertHandler = () => {\n    setSuccessAlert(true);\n    setTimeout(() => {\n      setSuccessAlert(false);\n      history.push(\"/equipment\");\n    }, 1500);\n  };\n\n  const onSubmit = async () => {\n    const toastLoading = toast.loading(\"Cargando...\");\n    let errNameEquipo = false;\n    let errLinea = false;\n    let errEstacion = false;\n    let errEmpresa = false;\n\n    if (nameEquipo.length < 1) {\n      setNameEquipoError(true);\n      errNameEquipo = true;\n    }\n\n    if (linea.length < 1) {\n      setLineaError(true);\n      errLinea = true;\n    }\n\n    if (estacion.length < 1) {\n      setEstacionError(true);\n      errEstacion = true;\n    }\n\n    if (empresa.length < 1) {\n      setEmpresaError(true);\n      errEmpresa = true;\n    }\n\n    if (!errNameEquipo && !errLinea && !errEstacion && !errEmpresa) {\n      try {\n        const formData = new FormData();\n        formData.append(\"equipo\", nameEquipo);\n        formData.append(\"linea\", linea);\n        formData.append(\"estacion\", estacion);\n        formData.append(\"empresa\", empresaId);\n        formData.append(\"pdf\", file[0]);\n        await axios({\n          method: \"PUT\",\n          url: `${backendUrl}/historico/${id}`,\n          data: formData,\n          headers: {\n            Authorization: `Bearer ${userSelector.user.jwtToken}`,\n            \"Content-Type\": \"multipart/form-data boundary=\" + Math.random().toString().substr(2)\n          }\n        });\n        setNameEquipo(\"\");\n        setLinea(\"\");\n        setEstacion(\"\");\n        setEmpresa(\"\");\n        toast.dismiss(toastLoading);\n        successAlertHandler();\n      } catch {\n        toast.dismiss(toastLoading);\n        toast.error(\"Error al cargar el equipo!\");\n      }\n    }\n  };\n\n  const [refreshEstacion, setRefreshEstacion] = useState(\"\");\n\n  const handleSelectLinea = value => {\n    setNameEquipo(\"\"); // para borrar el nombre de equipo alc ambiar linea\n\n    const result = dataEstaciones.filter(estacion => {\n      return estacion.linea === value;\n    });\n    setLinea(value);\n    setEstacion(\"\");\n    setNameEquipo(\"\");\n    setRefreshEstacion(result);\n  };\n\n  const handleSelectEstacion = value => {\n    setEstacion(value);\n    setNameEquipo(\"\"); // para borrar el nombre de equipo alc ambiar estacion\n\n    const result = dataEquipos.filter(equipo => {\n      console.log(value);\n      return equipo.estacion.id === value;\n    });\n    setDataListEquipo(result);\n  };\n\n  const handleSelectEmpresa = value => {\n    setEmpresa(value);\n  };\n\n  const sendToTrash = async id => {\n    console.log(id);\n    const toastLoading = toast.loading(\"Cargando...\");\n\n    try {\n      await axios({\n        method: \"PUT\",\n        url: `${backendUrl}/actividad/trash/${id}`,\n        data: {\n          state: true\n        },\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`\n        }\n      });\n      getActivityData();\n      toast.dismiss(toastLoading);\n      toast.success(\"Registro enviado a la papelera!\");\n    } catch {\n      toast.dismiss(toastLoading);\n      toast.error(\"Error al enviar a la papelera!\");\n    }\n  };\n\n  const [activityData, setActivityData] = useState([]);\n\n  const getActivityData = async () => {\n    const toastLoading = toast.loading(\"Cargando...\");\n\n    try {\n      const res = await axios.get(`${backendUrl}/actividad`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`\n        }\n      });\n      setActivityData(res.data);\n      toast.dismiss(toastLoading);\n    } catch (e) {\n      toast.dismiss(toastLoading);\n    }\n  };\n\n  const consult = async () => {\n    const toastLoading = toast.loading(\"Cargando...\");\n\n    try {\n      const res = await axios.get(`${backendUrl}/user/`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`\n        }\n      });\n      const res2 = await axios.get(`${backendUrl}/linea/`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`\n        }\n      });\n      const res3 = await axios.get(`${backendUrl}/estacion/`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`\n        }\n      });\n      const res4 = await axios.get(`${backendUrl}/equipo/`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`\n        }\n      });\n      const sanitize = res.data.filter(user => {\n        return user.role === \"Empresa\";\n      });\n      setData(sanitize);\n      setDataLineas(res2.data);\n      setDataEstaciones(res3.data);\n      setDataEquipos(res4.data);\n      const res5 = await axios.get(`${backendUrl}/historico/${id}`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`\n        }\n      });\n      setLinea(res5.data.linea);\n      setEmpresa(res5.data.empresa);\n      setUploadadFile(res5.data.key);\n      setEmpresaId(res5.data.empresa.id);\n      const result = res3.data.filter(estacion => {\n        return estacion.linea === res5.data.linea;\n      });\n      const res7 = await axios.get(`${backendUrl}/actividad`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`\n        }\n      });\n      setActivityData(res7.data);\n      setRefreshEstacion(result);\n      setEstacion(res5.data.estacion);\n      setNameEquipo(res5.data.equipo.identificacion);\n      toast.dismiss(toastLoading);\n    } catch {\n      toast.dismiss(toastLoading);\n      toast.error(\"Error al conectarse al servidor!\");\n    }\n  };\n\n  useEffect(() => {\n    consult();\n  }, [id]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [successAlert ? /*#__PURE__*/_jsxDEV(Alert, {\n      text: \"Historico cargado\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 23\n    }, this) : null, /*#__PURE__*/_jsxDEV(Toaster, {\n      position: \"top-right\",\n      reverseOrder: false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Navbar, {\n      title: \"Registro de mantenimiento\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-20 pb-20 vp-desktop\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-end justify-end mt-14\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/equipment/activity\",\n            children: /*#__PURE__*/_jsxDEV(ChevronLeftIcon, {\n              className: \"w-5 h-5 mr-2 text-gray-700\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            className: \"font-objetive-medium\",\n            to: \"/equipment/activity\",\n            children: \"Volver\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative w-full px-10 pt-10 pb-24 mt-6 bg-gray-100 rounded-3xl\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-xl font-objetive-bold mb-6\",\n          children: \"Cargar PDF datos hist\\xF3rico\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1 pr-6\",\n              children: /*#__PURE__*/_jsxDEV(ItemSelectorWithIcon, {\n                data: dataLineas,\n                text: \"L\\xEDnea\",\n                eventHandler: handleSelectLinea,\n                value: linea,\n                disabled: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1 pr-6\",\n              children: /*#__PURE__*/_jsxDEV(ItemSelectorWithIcon, {\n                data: refreshEstacion,\n                text: \"Estacion\",\n                eventHandler: handleSelectEstacion,\n                value: estacion,\n                disabled: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 pl-14\",\n            children: /*#__PURE__*/_jsxDEV(InputDataList, {\n              placeholder: \"Nombre del equipo\",\n              error: nameEquipoError,\n              eventHandler: onChangeNameEquipo,\n              value: nameEquipo,\n              disabled: true,\n              data: dataListEquipo,\n              not: \"No hay equipos cargados en la estaci\\xF3n seleccionada\",\n              id: \"empresaselect\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex mt-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 pr-14\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-5/6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pl-2 mb-4 font-objetive-medium\",\n                children: \"Mantenimiento a cargo de\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(ItemSelector, {\n                data: data,\n                text: \"Empresa\",\n                eventHandler: handleSelectEmpresa,\n                value: empresa,\n                disabled: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col flex-1 mt-4 ml-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", { ...getRootProps({\n                className: \"dropzone\"\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"input\", { ...getInputProps()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 354,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center mr-10 cursor-pointer\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-20 h-20 flex justify-center align-middle content-center items-center bg-gray-300 rounded-xl\",\n                  children: /*#__PURE__*/_jsxDEV(DocumentDownloadIcon, {\n                    className: \"w-10 h-10 text-gray-700 \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 357,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 356,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ml-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"underline font-objetive-bold text-app-violet-300\",\n                    children: \"Seleccionar pdf\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 360,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                    className: \"text-sm text-gray-700 font-objetive-regular w-52\",\n                    children: files.length > 0 ? files : uploadadFile ? uploadadFile : \"No se selecciono un pdf\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 363,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 359,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 15\n            }, this), files.length > 0 || uploadadFile ? /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: deleteFile,\n              className: \"flex items-center justify-center w-20 h-5 mt-2 bg-red-600 cursor-pointer rounded-xl\",\n              children: /*#__PURE__*/_jsxDEV(TrashIcon, {\n                className: \"w-4 h-4 text-white\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 378,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 17\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onSubmit,\n          type: \"button\",\n          className: \"absolute inline-flex items-center px-4 pt-4 pb-3 text-base text-white border border-transparent rounded-full shadow-sm bottom--20 right-32 font-objetive-medium bg-app-purple-btn hover:bg-red-500 focus:outline-none \",\n          children: \"Guardar y cargar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-20\",\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          data: activityData,\n          sendToTrash: sendToTrash\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(EquipmentCreate, \"Dsbely4yj0kySTr1un9h1e+gDRM=\", false, function () {\n  return [useSelector, useHistory, useDropzone];\n});\n\n_c = EquipmentCreate;\nexport default EquipmentCreate;\n\nvar _c;\n\n$RefreshReg$(_c, \"EquipmentCreate\");","map":{"version":3,"sources":["/Users/augusto/Desktop/proyeco-front/src/views/equipment/activity/historic/edit.js"],"names":["useEffect","useState","useCallback","axios","toast","Toaster","Link","useHistory","ChevronLeftIcon","DocumentDownloadIcon","TrashIcon","useSelector","InputDataList","ItemSelector","useDropzone","ItemSelectorWithIcon","Navbar","Alert","Table","backendUrl","EquipmentCreate","props","id","location","state","userSelector","store","user","data","setData","nameEquipo","setNameEquipo","nameEquipoError","setNameEquipoError","linea","setLinea","lineaError","setLineaError","estacion","setEstacion","estacionError","setEstacionError","empresa","setEmpresa","empresaId","setEmpresaId","empresaError","setEmpresaError","dataLineas","setDataLineas","dataEquipos","setDataEquipos","dataEstaciones","setDataEstaciones","successAlert","setSuccessAlert","dataList","setDataList","dataListEquipo","setDataListEquipo","uploadadFile","setUploadadFile","file","setFile","history","onDrop","acceptedFiles","getRootProps","getInputProps","multiple","accept","files","map","path","deleteFile","onChangeNameEquipo","value","result","filter","equipo","identificacion","length","name","successAlertHandler","setTimeout","push","onSubmit","toastLoading","loading","errNameEquipo","errLinea","errEstacion","errEmpresa","formData","FormData","append","method","url","headers","Authorization","jwtToken","Math","random","toString","substr","dismiss","error","refreshEstacion","setRefreshEstacion","handleSelectLinea","handleSelectEstacion","console","log","handleSelectEmpresa","sendToTrash","getActivityData","success","activityData","setActivityData","res","get","e","consult","res2","res3","res4","sanitize","role","res5","key","res7","className"],"mappings":"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","sourcesContent":["import { useEffect, useState, useCallback } from \"react\";\nimport axios from \"axios\";\nimport toast, { Toaster } from \"react-hot-toast\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport {\n  ChevronLeftIcon,\n  DocumentDownloadIcon,\n  TrashIcon,\n} from \"@heroicons/react/outline\";\nimport { useSelector } from \"react-redux\";\nimport InputDataList from \"../../../../components/form/textInput/datalist\";\nimport ItemSelector from \"../../../../components/form/itemSelector\";\nimport { useDropzone } from \"react-dropzone\";\nimport ItemSelectorWithIcon from \"../../../../components/form/itemSelectorWithIcon\";\nimport Navbar from \"../../../../@app/navbar\";\nimport Alert from \"../../../../components/alert\";\nimport Table from \"../table\";\nimport { backendUrl } from \"../../../../config\";\n\nconst EquipmentCreate = (props) => {\n  const { id } = props.location.state;\n  const userSelector = useSelector((store) => store.user);\n  const [data, setData] = useState([]);\n  const [nameEquipo, setNameEquipo] = useState(\"\");\n  const [nameEquipoError, setNameEquipoError] = useState(false);\n  const [linea, setLinea] = useState(\"\");\n  const [lineaError, setLineaError] = useState(false);\n  const [estacion, setEstacion] = useState(\"\");\n  const [estacionError, setEstacionError] = useState(false);\n  const [empresa, setEmpresa] = useState(\"\");\n  const [empresaId, setEmpresaId] = useState(\"\");\n  const [empresaError, setEmpresaError] = useState(false);\n  const [dataLineas, setDataLineas] = useState([]);\n  const [dataEquipos, setDataEquipos] = useState([]);\n  const [dataEstaciones, setDataEstaciones] = useState([]);\n  const [successAlert, setSuccessAlert] = useState(false);\n  const [dataList, setDataList] = useState([]);\n  const [dataListEquipo, setDataListEquipo] = useState([]);\n  const [uploadadFile, setUploadadFile] = useState(\"\");\n  const [file, setFile] = useState([]);\n\n  let history = useHistory();\n\n  const onDrop = useCallback(\n    (acceptedFiles) => {\n      setFile([...file, ...acceptedFiles]);\n    },\n    [file]\n  );\n\n  const { getRootProps, getInputProps } = useDropzone({\n    onDrop,\n    multiple: false,\n    accept: \"application/pdf\",\n  });\n\n  const files = file.map((file) => <div key={file.path}>{file.path}</div>);\n\n  const deleteFile = () => {\n    setUploadadFile(\"\");\n    setFile([]);\n  };\n\n  const onChangeNameEquipo = (value) => {\n    setNameEquipo(value);\n    setNameEquipoError(false);\n\n    const result = dataEquipos.filter((equipo) => {\n      return equipo.identificacion === value;\n    });\n\n    setEmpresa(result.length > 0 ? result[0].empresa.name : \"\");\n    setEmpresaId(result.length > 0 ? result[0].empresa.id : \"\");\n  };\n\n  const successAlertHandler = () => {\n    setSuccessAlert(true);\n    setTimeout(() => {\n      setSuccessAlert(false);\n      history.push(\"/equipment\");\n    }, 1500);\n  };\n\n  const onSubmit = async () => {\n    const toastLoading = toast.loading(\"Cargando...\");\n    let errNameEquipo = false;\n    let errLinea = false;\n    let errEstacion = false;\n    let errEmpresa = false;\n\n    if (nameEquipo.length < 1) {\n      setNameEquipoError(true);\n      errNameEquipo = true;\n    }\n\n    if (linea.length < 1) {\n      setLineaError(true);\n      errLinea = true;\n    }\n\n    if (estacion.length < 1) {\n      setEstacionError(true);\n      errEstacion = true;\n    }\n\n    if (empresa.length < 1) {\n      setEmpresaError(true);\n      errEmpresa = true;\n    }\n\n    if (!errNameEquipo && !errLinea && !errEstacion && !errEmpresa) {\n      try {\n        const formData = new FormData();\n        formData.append(\"equipo\", nameEquipo);\n        formData.append(\"linea\", linea);\n        formData.append(\"estacion\", estacion);\n        formData.append(\"empresa\", empresaId);\n        formData.append(\"pdf\", file[0]);\n\n        await axios({\n          method: \"PUT\",\n          url: `${backendUrl}/historico/${id}`,\n          data: formData,\n          headers: {\n            Authorization: `Bearer ${userSelector.user.jwtToken}`,\n            \"Content-Type\":\n              \"multipart/form-data boundary=\" +\n              Math.random().toString().substr(2),\n          },\n        });\n        setNameEquipo(\"\");\n        setLinea(\"\");\n        setEstacion(\"\");\n        setEmpresa(\"\");\n        toast.dismiss(toastLoading);\n        successAlertHandler();\n      } catch {\n        toast.dismiss(toastLoading);\n        toast.error(\"Error al cargar el equipo!\");\n      }\n    }\n  };\n\n  const [refreshEstacion, setRefreshEstacion] = useState(\"\");\n  const handleSelectLinea = (value) => {\n    setNameEquipo(\"\"); // para borrar el nombre de equipo alc ambiar linea\n    const result = dataEstaciones.filter((estacion) => {\n      return estacion.linea === value;\n    });\n    setLinea(value);\n    setEstacion(\"\");\n    setNameEquipo(\"\");\n    setRefreshEstacion(result);\n  };\n\n  const handleSelectEstacion = (value) => {\n    setEstacion(value);\n    setNameEquipo(\"\"); // para borrar el nombre de equipo alc ambiar estacion\n    const result = dataEquipos.filter((equipo) => {\n      console.log(value);\n      return equipo.estacion.id === value;\n    });\n    setDataListEquipo(result);\n  };\n\n  const handleSelectEmpresa = (value) => {\n    setEmpresa(value);\n  };\n\n  const sendToTrash = async (id) => {\n    console.log(id);\n    const toastLoading = toast.loading(\"Cargando...\");\n    try {\n      await axios({\n        method: \"PUT\",\n        url: `${backendUrl}/actividad/trash/${id}`,\n        data: { state: true },\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`,\n        },\n      });\n      getActivityData();\n      toast.dismiss(toastLoading);\n      toast.success(\"Registro enviado a la papelera!\");\n    } catch {\n      toast.dismiss(toastLoading);\n      toast.error(\"Error al enviar a la papelera!\");\n    }\n  };\n\n  const [activityData, setActivityData] = useState([]);\n  const getActivityData = async () => {\n    const toastLoading = toast.loading(\"Cargando...\");\n    try {\n      const res = await axios.get(`${backendUrl}/actividad`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`,\n        },\n      });\n      setActivityData(res.data);\n      toast.dismiss(toastLoading);\n    } catch (e) {\n      toast.dismiss(toastLoading);\n    }\n  };\n\n  const consult = async () => {\n    const toastLoading = toast.loading(\"Cargando...\");\n    try {\n      const res = await axios.get(`${backendUrl}/user/`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`,\n        },\n      });\n      const res2 = await axios.get(`${backendUrl}/linea/`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`,\n        },\n      });\n      const res3 = await axios.get(`${backendUrl}/estacion/`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`,\n        },\n      });\n      const res4 = await axios.get(`${backendUrl}/equipo/`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`,\n        },\n      });\n\n      const sanitize = res.data.filter((user) => {\n        return user.role === \"Empresa\";\n      });\n\n      setData(sanitize);\n      setDataLineas(res2.data);\n      setDataEstaciones(res3.data);\n      setDataEquipos(res4.data);\n\n      const res5 = await axios.get(\n        `${backendUrl}/historico/${id}`,\n        {\n          headers: {\n            Authorization: `Bearer ${userSelector.user.jwtToken}`,\n          },\n        }\n      );\n\n      setLinea(res5.data.linea);\n      setEmpresa(res5.data.empresa);\n      setUploadadFile(res5.data.key);\n      setEmpresaId(res5.data.empresa.id);\n\n      const result = res3.data.filter((estacion) => {\n        return estacion.linea === res5.data.linea;\n      });\n\n      const res7 = await axios.get(`${backendUrl}/actividad`, {\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`,\n        },\n      });\n\n      setActivityData(res7.data);\n\n      setRefreshEstacion(result);\n      setEstacion(res5.data.estacion);\n\n      setNameEquipo(res5.data.equipo.identificacion);\n\n      toast.dismiss(toastLoading);\n    } catch {\n      toast.dismiss(toastLoading);\n      toast.error(\"Error al conectarse al servidor!\");\n    }\n  };\n\n  useEffect(() => {\n    consult();\n  }, [id]);\n\n  return (\n    <>\n      {successAlert ? <Alert text=\"Historico cargado\" /> : null}\n      <Toaster position=\"top-right\" reverseOrder={false} />\n      <Navbar title=\"Registro de mantenimiento\" />\n      <div className=\"px-20 pb-20 vp-desktop\">\n        <div className=\"flex items-end justify-end mt-14\">\n          <div className=\"flex\">\n            <Link to=\"/equipment/activity\">\n              <ChevronLeftIcon className=\"w-5 h-5 mr-2 text-gray-700\" />\n            </Link>\n            <Link className=\"font-objetive-medium\" to=\"/equipment/activity\">\n              Volver\n            </Link>\n          </div>\n        </div>\n        <div className=\"relative w-full px-10 pt-10 pb-24 mt-6 bg-gray-100 rounded-3xl\">\n          <h1 className=\"text-xl font-objetive-bold mb-6\">\n            Cargar PDF datos histórico\n          </h1>\n          <div className=\"flex\">\n            <div className=\"flex flex-1\">\n              <div className=\"flex-1 pr-6\">\n                <ItemSelectorWithIcon\n                  data={dataLineas}\n                  text=\"Línea\"\n                  eventHandler={handleSelectLinea}\n                  value={linea}\n                  disabled={true}\n                />\n              </div>\n              <div className=\"flex-1 pr-6\">\n                <ItemSelectorWithIcon\n                  data={refreshEstacion}\n                  text=\"Estacion\"\n                  eventHandler={handleSelectEstacion}\n                  value={estacion}\n                  disabled={true}\n                />\n              </div>\n            </div>\n            <div className=\"flex-1 pl-14\">\n              <InputDataList\n                placeholder=\"Nombre del equipo\"\n                error={nameEquipoError}\n                eventHandler={onChangeNameEquipo}\n                value={nameEquipo}\n                disabled={true}\n                data={dataListEquipo}\n                not=\"No hay equipos cargados en la estación seleccionada\"\n                id=\"empresaselect\"\n              />\n            </div>\n          </div>\n\n          <div className=\"flex mt-8\">\n            <div className=\"flex-1 pr-14\">\n              <div className=\"w-5/6\">\n                <div className=\"pl-2 mb-4 font-objetive-medium\">\n                  Mantenimiento a cargo de\n                </div>\n                <ItemSelector\n                  data={data}\n                  text=\"Empresa\"\n                  eventHandler={handleSelectEmpresa}\n                  value={empresa}\n                  disabled={true}\n                />\n              </div>\n            </div>\n            <div className=\"flex flex-col flex-1 mt-4 ml-2\">\n              <div {...getRootProps({ className: \"dropzone\" })}>\n                <input {...getInputProps()} />\n                <div className=\"flex items-center mr-10 cursor-pointer\">\n                  <div className=\"w-20 h-20 flex justify-center align-middle content-center items-center bg-gray-300 rounded-xl\">\n                    <DocumentDownloadIcon className=\"w-10 h-10 text-gray-700 \" />\n                  </div>\n                  <div className=\"ml-2\">\n                    <h3 className=\"underline font-objetive-bold text-app-violet-300\">\n                      Seleccionar pdf\n                    </h3>\n                    <h4 className=\"text-sm text-gray-700 font-objetive-regular w-52\">\n                      {files.length > 0\n                        ? files\n                        : uploadadFile\n                        ? uploadadFile\n                        : \"No se selecciono un pdf\"}\n                    </h4>\n                  </div>\n                </div>\n              </div>\n              {files.length > 0 || uploadadFile ? (\n                <div\n                  onClick={deleteFile}\n                  className=\"flex items-center justify-center w-20 h-5 mt-2 bg-red-600 cursor-pointer rounded-xl\"\n                >\n                  <TrashIcon className=\"w-4 h-4 text-white\" />\n                </div>\n              ) : null}\n            </div>\n          </div>\n\n          <button\n            onClick={onSubmit}\n            type=\"button\"\n            className=\"absolute inline-flex items-center px-4 pt-4 pb-3 text-base text-white border border-transparent rounded-full shadow-sm bottom--20 right-32 font-objetive-medium bg-app-purple-btn hover:bg-red-500 focus:outline-none \"\n          >\n            Guardar y cargar\n          </button>\n        </div>\n\n        <div className=\"mt-20\">\n          <Table data={activityData} sendToTrash={sendToTrash} />\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default EquipmentCreate;\n"]},"metadata":{},"sourceType":"module"}