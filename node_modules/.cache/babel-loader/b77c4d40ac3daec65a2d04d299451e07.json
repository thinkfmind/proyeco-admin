{"ast":null,"code":"var _jsxFileName = \"/Users/augusto/Desktop/proyeco-front/src/views/equipment/search.js\",\n    _s = $RefreshSig$();\n\nimport { TrashIcon } from \"@heroicons/react/outline\";\nimport { useEffect, useState } from \"react\";\nimport Navbar from \"../../@app/navbar\";\nimport TableOrderPagination from \"../../components/tableOrderPagination\";\nimport { similarity } from \"../../helpers/string\";\nimport { useSelector } from \"react-redux\";\nimport useFetch from \"../../hooks/useFetch\";\nimport { Link } from \"react-router-dom\";\nimport usePagination from \"../../hooks/usePagination\";\nimport useOrderTable from \"../../hooks/useOrderTable\";\nimport { backendUrl } from \"../../config\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Search = () => {\n  _s();\n\n  const userSelector = useSelector(store => store.user);\n  const {\n    response\n  } = useFetch({\n    url: `${backendUrl}/equipo`,\n    options: {\n      headers: {\n        Authorization: `Bearer ${userSelector.user.jwtToken}`\n      }\n    }\n  });\n  const [searchValue, setSearchValue] = useState(undefined);\n  const [equipos, setEquipos] = useState([]);\n  const paginationObject = usePagination({\n    maxCantRow: 7,\n    cantElements: equipos.length\n  });\n  const {\n    dataOrdered,\n    sortTable\n  } = useOrderTable({\n    data: equipos,\n    initProperty: \"createdAt\"\n  });\n\n  const handleClickSearch = value => {\n    setSearchValue(value);\n  };\n\n  useEffect(() => {\n    if (searchValue === undefined) {\n      setSearchValue(localStorage.getItem(\"search\"));\n    }\n  }, [response]);\n  useEffect(() => {\n    if (response) {\n      if (searchValue) {\n        const equipFiltered = response.filter(equipo => {\n          const coincidence = similarity(equipo.name, searchValue);\n          return coincidence > 0.3;\n        });\n        setEquipos(equipFiltered);\n      } else {\n        setEquipos(response);\n      }\n    }\n  }, [searchValue, response]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      title: \"B\\xFAsqueda de equipos\",\n      searchValue: searchValue,\n      handleClickSearch: handleClickSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-20 pt-20 pb-10 vp-desktop\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"mb-2 font-objetive-bold\",\n        children: [searchValue || \"Todos los equipos\", \" - \", equipos.length, \" Resultados de la b\\xFAsqueda\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"w-full table-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: dataOrdered.map(equipo => {\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"relative\",\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: `py-4 text-xs transition-padding duration-500 ease-in-out border-b border-gray-300 font-objetive-medium`,\n                children: equipo.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: `py-4 text-xs transition-padding duration-500 ease-in-out truncate border-b border-gray-300 font-objetive-regular`,\n                children: [equipo.linea.name, \" - \", equipo.linea.lugar, \" -\", \" \", equipo.estacion.name]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: `py-4 text-xs transition-padding duration-500 ease-in-out border-b border-gray-300 font-objetive-regular`,\n                children: [\"A cargo de: \", equipo.empresa.name]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: `py-4 border-b transition-padding duration-500 ease-in-out border-gray-300`,\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"text-xs text-black underline font-objetive-bold\",\n                  children: /*#__PURE__*/_jsxDEV(Link, {\n                    to: {\n                      pathname: \"/equipment/details\",\n                      state: {\n                        id: equipo.id\n                      }\n                    },\n                    children: \"Ver ficha\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 95,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 19\n              }, this), userSelector.user.role === \"Admin\" ? /*#__PURE__*/_jsxDEV(\"td\", {\n                className: `py-4 border-b transition-padding duration-500 ease-in-out border-gray-300`,\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"text-xs underline font-objetive-bold text-app-purple-300\",\n                  children: /*#__PURE__*/_jsxDEV(Link, {\n                    to: {\n                      pathname: \"/equipment/edit\",\n                      state: {\n                        id: equipo.id\n                      }\n                    },\n                    children: \"Editar\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 110,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 21\n              }, this) : null, userSelector.user.role === \"Admin\" ? /*#__PURE__*/_jsxDEV(\"td\", {\n                className: `py-4 border-b transition-padding duration-500 ease-in-out border-gray-300`,\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"text-xs underline font-objetive-bold text-app-purple-300\",\n                  children: /*#__PURE__*/_jsxDEV(TrashIcon, {\n                    className: \"w-5 h-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 127,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 21\n              }, this) : null]\n            }, equipo.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableOrderPagination, { ...paginationObject,\n        order: {\n          sortTable,\n          alphabetic: \"name\",\n          date: \"createdAt\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Search, \"G+eCjBade6nQfaDlbc8s4s3/0HY=\", false, function () {\n  return [useSelector, useFetch, usePagination, useOrderTable];\n});\n\n_c = Search;\nexport default Search;\n\nvar _c;\n\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"sources":["/Users/augusto/Desktop/proyeco-front/src/views/equipment/search.js"],"names":["TrashIcon","useEffect","useState","Navbar","TableOrderPagination","similarity","useSelector","useFetch","Link","usePagination","useOrderTable","backendUrl","Search","userSelector","store","user","response","url","options","headers","Authorization","jwtToken","searchValue","setSearchValue","undefined","equipos","setEquipos","paginationObject","maxCantRow","cantElements","length","dataOrdered","sortTable","data","initProperty","handleClickSearch","value","localStorage","getItem","equipFiltered","filter","equipo","coincidence","name","map","linea","lugar","estacion","empresa","pathname","state","id","role","alphabetic","date"],"mappings":"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","sourcesContent":["import { TrashIcon } from \"@heroicons/react/outline\";\nimport { useEffect, useState } from \"react\";\nimport Navbar from \"../../@app/navbar\";\nimport TableOrderPagination from \"../../components/tableOrderPagination\";\nimport { similarity } from \"../../helpers/string\";\nimport { useSelector } from \"react-redux\";\nimport useFetch from \"../../hooks/useFetch\";\nimport { Link } from \"react-router-dom\";\nimport usePagination from \"../../hooks/usePagination\";\nimport useOrderTable from \"../../hooks/useOrderTable\";\nimport { backendUrl } from \"../../config\";\n\nconst Search = () => {\n  const userSelector = useSelector((store) => store.user);\n  const { response } = useFetch({\n    url: `${backendUrl}/equipo`,\n    options: {\n      headers: {\n        Authorization: `Bearer ${userSelector.user.jwtToken}`,\n      },\n    },\n  });\n  const [searchValue, setSearchValue] = useState(undefined);\n  const [equipos, setEquipos] = useState([]);\n  const paginationObject = usePagination({\n    maxCantRow: 7,\n    cantElements: equipos.length,\n  });\n  const { dataOrdered, sortTable } = useOrderTable({\n    data: equipos,\n    initProperty: \"createdAt\",\n  });\n\n  const handleClickSearch = (value) => {\n    setSearchValue(value);\n  };\n\n  useEffect(() => {\n    if (searchValue === undefined) {\n      setSearchValue(localStorage.getItem(\"search\"));\n    }\n  }, [response]);\n\n  useEffect(() => {\n    if (response) {\n      if (searchValue) {\n        const equipFiltered = response.filter((equipo) => {\n          const coincidence = similarity(equipo.name, searchValue);\n          return coincidence > 0.3;\n        });\n        setEquipos(equipFiltered);\n      } else {\n        setEquipos(response);\n      }\n    }\n  }, [searchValue, response]);\n\n  return (\n    <>\n      <Navbar\n        title=\"Búsqueda de equipos\"\n        searchValue={searchValue}\n        handleClickSearch={handleClickSearch}\n      />\n      <div className=\"px-20 pt-20 pb-10 vp-desktop\">\n        <h1 className=\"mb-2 font-objetive-bold\">\n          {searchValue || \"Todos los equipos\"} - {equipos.length} Resultados de\n          la búsqueda\n        </h1>\n        <table className=\"w-full table-auto\">\n          <tbody>\n            {dataOrdered.map((equipo) => {\n              return (\n                <tr className=\"relative\" key={equipo.id}>\n                  <td\n                    className={`py-4 text-xs transition-padding duration-500 ease-in-out border-b border-gray-300 font-objetive-medium`}\n                  >\n                    {equipo.name}\n                  </td>\n                  <td\n                    className={`py-4 text-xs transition-padding duration-500 ease-in-out truncate border-b border-gray-300 font-objetive-regular`}\n                  >\n                    {equipo.linea.name} - {equipo.linea.lugar} -{\" \"}\n                    {equipo.estacion.name}\n                  </td>\n                  <td\n                    className={`py-4 text-xs transition-padding duration-500 ease-in-out border-b border-gray-300 font-objetive-regular`}\n                  >\n                    A cargo de: {equipo.empresa.name}\n                  </td>\n                  <td\n                    className={`py-4 border-b transition-padding duration-500 ease-in-out border-gray-300`}\n                  >\n                    <button className=\"text-xs text-black underline font-objetive-bold\">\n                      <Link\n                        to={{\n                          pathname: \"/equipment/details\",\n                          state: { id: equipo.id },\n                        }}\n                      >\n                        Ver ficha\n                      </Link>\n                    </button>\n                  </td>\n                  {userSelector.user.role === \"Admin\" ? (\n                    <td\n                      className={`py-4 border-b transition-padding duration-500 ease-in-out border-gray-300`}\n                    >\n                      <button className=\"text-xs underline font-objetive-bold text-app-purple-300\">\n                        <Link\n                          to={{\n                            pathname: \"/equipment/edit\",\n                            state: { id: equipo.id },\n                          }}\n                        >\n                          Editar\n                        </Link>\n                      </button>\n                    </td>\n                  ) : null}\n\n                  {userSelector.user.role === \"Admin\" ? (\n                    <td\n                      className={`py-4 border-b transition-padding duration-500 ease-in-out border-gray-300`}\n                    >\n                      <button className=\"text-xs underline font-objetive-bold text-app-purple-300\">\n                        <TrashIcon className=\"w-5 h-5\" />\n                      </button>\n                    </td>\n                  ) : null}\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n        <TableOrderPagination\n          {...paginationObject}\n          order={{ sortTable, alphabetic: \"name\", date: \"createdAt\" }}\n        />\n      </div>\n    </>\n  );\n};\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}