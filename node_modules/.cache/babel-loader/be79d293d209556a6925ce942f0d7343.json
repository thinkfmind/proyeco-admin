{"ast":null,"code":"var _jsxFileName = \"/Users/augusto/Desktop/proyeco-front/src/components/users/table/equipos.js\",\n    _s = $RefreshSig$();\n\nimport { CalendarIcon, ChevronDownIcon } from \"@heroicons/react/outline\";\nimport { DownloadIcon } from \"@heroicons/react/solid\";\nimport { forwardRef, useEffect, useState } from \"react\";\nimport DatePicker from \"react-datepicker\";\nimport axios from \"axios\";\nimport { compareAsc } from \"date-fns\";\nimport { useSelector } from \"react-redux\";\nimport Row from \"./row\";\nimport useFetch from \"../../../hooks/useFetch\";\nimport { states } from \"../../../helpers/equipment\";\nimport { getValue } from \"../../../helpers/table\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { backendUrl } from \"../../../config\";\nimport { tiposEquipos } from \"../../../helpers/staticData\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Table = _ref => {\n  _s();\n\n  let {\n    data,\n    pagination,\n    maxCantRow,\n    changeData,\n    sendToTrash\n  } = _ref;\n  const userSelector = useSelector(store => store.user);\n  const [isAllEquip, setIsAllEquip] = useState(false);\n  const [startDate, setStartDate] = useState(new Date());\n  const [endDate, setEndDate] = useState(null);\n  const [filtroEmpresa, setFiltroEmpresa] = useState(null);\n  const [filtroTipo, setFiltroTipo] = useState(null);\n  const [filtroLinea, setFiltroLinea] = useState(null);\n  const [filtroEstado, setFiltroEstado] = useState(null);\n  const {\n    response: responseLinea\n  } = useFetch({\n    url: `${backendUrl}/linea`,\n    options: {\n      headers: {\n        Authorization: `Bearer ${userSelector.user.jwtToken}`\n      }\n    },\n    initData: []\n  });\n  const {\n    response: responseUsers\n  } = useFetch({\n    url: `${backendUrl}/user`,\n    options: {\n      headers: {\n        Authorization: `Bearer ${userSelector.user.jwtToken}`\n      }\n    },\n    initData: []\n  });\n  const {\n    response: responseEquipo\n  } = useFetch({\n    url: `${backendUrl}/equipo`,\n    options: {\n      headers: {\n        Authorization: `Bearer ${userSelector.user.jwtToken}`\n      }\n    }\n  });\n  const [empresas, setEmpresas] = useState([]);\n\n  const handleClickAllCheck = () => {\n    setIsAllEquip(!isAllEquip);\n  };\n\n  const handleFilterTable = _ref2 => {\n    let {\n      selectValue,\n      property,\n      date\n    } = _ref2;\n    let dataFiltered = responseEquipo;\n\n    if (filtroEmpresa) {\n      dataFiltered = [...responseEquipo].filter(equipo => {\n        return equipo.empresa.name === filtroEmpresa;\n      });\n    }\n\n    if (filtroTipo) {\n      dataFiltered = [...responseEquipo].filter(equipo => {\n        return equipo.tipo === filtroTipo;\n      });\n    }\n\n    if (filtroLinea) {\n      dataFiltered = [...responseEquipo].filter(equipo => {\n        return equipo.linea.name === filtroLinea;\n      });\n    }\n\n    if (filtroEstado) {\n      dataFiltered = [...responseEquipo].filter(equipo => {\n        return equipo.estado === filtroEstado;\n      });\n    }\n\n    if ((date === null || date === void 0 ? void 0 : date.start) && (date === null || date === void 0 ? void 0 : date.end)) {\n      dataFiltered = [...responseEquipo].filter(equipo => {\n        const value = getValue(property, equipo);\n        const equipDate = new Date(value);\n\n        if (compareAsc(equipDate, date.start.setHours(0, 0, 0, 0)) === -1) {\n          return false;\n        }\n\n        if (compareAsc(date.end.setHours(23, 59, 59), equipDate) === -1) {\n          return false;\n        }\n\n        return equipo;\n      });\n    } // if (selectValue || (date?.start && date?.end)) {\n    //   dataFiltered = [...responseEquipo].filter((equipo) => {\n    //     const value = getValue(property, equipo);\n    //     const equipDate = new Date(value);\n    //     if (date?.start && date?.end) {\n    //       if (compareAsc(equipDate, date.start.setHours(0, 0, 0, 0)) === -1) {\n    //         return false;\n    //       }\n    //       if (compareAsc(date.end.setHours(23, 59, 59), equipDate) === -1) {\n    //         return false;\n    //       }\n    //       return true;\n    //     }\n    //     return value === selectValue;\n    //   });\n    // }\n\n\n    changeData(dataFiltered);\n  };\n\n  const handleFiltroEstado = value => {\n    const val = value ? value : null;\n    setFiltroEstado(val);\n    handleFilterTable();\n  };\n\n  const handleFiltroEmpresa = value => {\n    const val = value ? value : null;\n    setFiltroEmpresa(val);\n    handleFilterTable();\n  };\n\n  const handleFiltroTipo = value => {\n    const val = value ? value : null;\n    setFiltroTipo(val);\n    handleFilterTable();\n  };\n\n  const handleFiltroLinea = value => {\n    const val = value ? value : null;\n    setFiltroLinea(val);\n    handleFilterTable();\n  };\n\n  const handleClickDownloadZip = () => {\n    const inputsDownloadZip = document.querySelectorAll(\".input-check-downloadZip\");\n    const inputsDownloadTrue = Array.prototype.filter.call(inputsDownloadZip, input => input.checked);\n\n    if (data) {\n      const idsToDownload = data.filter(user => {\n        return inputsDownloadTrue.find(input => input.value === user.id);\n      });\n      let keys = [];\n\n      for (let el of idsToDownload) {\n        if (el.historico) keys.push({\n          filename: el.historico\n        });\n      }\n\n      axios({\n        url: `${backendUrl}/historico/zip`,\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`\n        },\n        data: {\n          keys: keys\n        },\n        responseType: \"blob\" // important\n\n      }).then(_ref3 => {\n        let {\n          data\n        } = _ref3;\n        const downloadUrl = window.URL.createObjectURL(new Blob([data], {\n          type: \"application/zip\"\n        }));\n        const link = document.createElement(\"a\");\n        link.href = downloadUrl;\n        link.setAttribute(\"download\", \"file.zip\"); //any other extension\n\n        document.body.appendChild(link);\n        link.click();\n        link.remove();\n      });\n    }\n  };\n\n  const onChangeDate = dates => {\n    const [start, end] = dates;\n    setStartDate(start);\n    setEndDate(end);\n\n    if (start && end) {\n      handleFilterTable({\n        property: \"createdAt\",\n        date: {\n          start,\n          end\n        }\n      });\n    }\n\n    if (!end) {\n      changeData(responseEquipo);\n    }\n  };\n\n  useEffect(() => {\n    if (responseUsers.length) {\n      const empresas = [];\n\n      for (let i = 0; i < responseUsers.length; i++) {\n        const user = responseUsers[i];\n\n        if (user.role.toUpperCase() === \"EMPRESA\") {\n          if (!empresas.find(empresa => empresa === user.name)) {\n            empresas.push(user.name);\n          }\n        }\n      }\n\n      setEmpresas(empresas);\n    }\n  }, [responseUsers]);\n  const CustomInputDate = /*#__PURE__*/forwardRef((_ref4, ref) => {\n    let {\n      value,\n      onClick\n    } = _ref4;\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      ref: ref,\n      onClick: onClick,\n      className: \"relative flex items-center text-sm font-objetive-bold text-app-green-3\",\n      children: [/*#__PURE__*/_jsxDEV(CalendarIcon, {\n        className: \"w-6 h-6 mr-1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: endDate ? value : \"Fecha de mantenimiento\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ChevronDownIcon, {\n        className: \"w-4 h-4 ml-1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"mt-10 mb-6 text-xl font-objetive-bold\",\n      children: \"Listado de equipos\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between mt-6 mb-14\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: handleClickAllCheck,\n          type: \"checkbox\",\n          className: \"mb-1 bg-gray-400 border-2 rounded-sm input-check-downloadZip\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          onChange: e => handleFilterTable({\n            selectValue: e.target.value,\n            property: \"empresa.name\"\n          }),\n          className: \"text-sm text-center border-none font-objetive-bold text-app-green-3 hover:cursor-pointer\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Empresa a cargo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this), empresas.map(empresa => {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: empresa,\n              children: empresa\n            }, `empresa-${empresa}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 17\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: /*#__PURE__*/_jsxDEV(\"select\", {\n          onChange: e => handleFilterTable({\n            selectValue: e.target.value,\n            property: \"tipo\"\n          }),\n          className: \"text-sm text-center border-none font-objetive-bold text-app-green-3 hover:cursor-pointer\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Tipo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), tiposEquipos.map(equipo => {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: equipo.id,\n              children: equipo.name\n            }, `equipo-${equipo.id}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 17\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: /*#__PURE__*/_jsxDEV(\"select\", {\n          onChange: e => handleFilterTable({\n            selectValue: e.target.value,\n            property: \"linea.id\"\n          }),\n          className: \"text-sm text-center border-none font-objetive-bold text-app-green-3 hover:cursor-pointer\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"L\\xEDnea\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 13\n          }, this), responseLinea && responseLinea.map(linea => {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: linea.id,\n              children: linea.name\n            }, `linea-${linea.id}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 19\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: /*#__PURE__*/_jsxDEV(\"select\", {\n          onChange: e => handleFilterTable({\n            selectValue: e.target.value,\n            property: \"estado\"\n          }),\n          className: \"w-40 text-sm text-center truncate border-none font-objetive-bold text-app-green-3 hover:cursor-pointer\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Estado de equipo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 13\n          }, this), states.map(state => {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: state,\n              children: state\n            }, `estado-${state}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 17\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: /*#__PURE__*/_jsxDEV(DatePicker, {\n          selected: startDate,\n          onChange: onChangeDate,\n          selectsRange: true,\n          startDate: startDate,\n          endDate: endDate,\n          customInput: /*#__PURE__*/_jsxDEV(CustomInputDate, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 26\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center mb-2\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleClickDownloadZip,\n          className: \"relative px-10 py-2 text-sm rounded-full font-objetive-medium bg-app-green-1 text-app-green-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute top-0 bottom-0 flex items-center -left-1\",\n            children: /*#__PURE__*/_jsxDEV(DownloadIcon, {\n              className: \"w-8 h-8 p-1 text-white rounded-full bg-app-green-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"-mb-1\",\n            children: \"Descargar .ZIP\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this), data && data.map((user, index) => {\n      if (index < maxCantRow * pagination && index >= pagination * maxCantRow - maxCantRow) {\n        return /*#__PURE__*/_jsxDEV(Row, {\n          user: user,\n          index: index,\n          isChecked: isAllEquip,\n          sendToTrash: sendToTrash\n        }, index + user.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 15\n        }, this);\n      }\n\n      return null;\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 224,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Table, \"SP9Lb1M2rtxYXBEGGn4fHrWIBH0=\", false, function () {\n  return [useSelector, useFetch, useFetch, useFetch];\n});\n\n_c = Table;\nexport default Table;\n\nvar _c;\n\n$RefreshReg$(_c, \"Table\");","map":{"version":3,"sources":["/Users/augusto/Desktop/proyeco-front/src/components/users/table/equipos.js"],"names":["CalendarIcon","ChevronDownIcon","DownloadIcon","forwardRef","useEffect","useState","DatePicker","axios","compareAsc","useSelector","Row","useFetch","states","getValue","backendUrl","tiposEquipos","Table","data","pagination","maxCantRow","changeData","sendToTrash","userSelector","store","user","isAllEquip","setIsAllEquip","startDate","setStartDate","Date","endDate","setEndDate","filtroEmpresa","setFiltroEmpresa","filtroTipo","setFiltroTipo","filtroLinea","setFiltroLinea","filtroEstado","setFiltroEstado","response","responseLinea","url","options","headers","Authorization","jwtToken","initData","responseUsers","responseEquipo","empresas","setEmpresas","handleClickAllCheck","handleFilterTable","selectValue","property","date","dataFiltered","filter","equipo","empresa","name","tipo","linea","estado","start","end","value","equipDate","setHours","handleFiltroEstado","val","handleFiltroEmpresa","handleFiltroTipo","handleFiltroLinea","handleClickDownloadZip","inputsDownloadZip","document","querySelectorAll","inputsDownloadTrue","Array","prototype","call","input","checked","idsToDownload","find","id","keys","el","historico","push","filename","method","responseType","then","downloadUrl","window","URL","createObjectURL","Blob","type","link","createElement","href","setAttribute","body","appendChild","click","remove","onChangeDate","dates","length","i","role","toUpperCase","CustomInputDate","ref","onClick","e","target","map","state","index"],"mappings":"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","sourcesContent":["import { CalendarIcon, ChevronDownIcon } from \"@heroicons/react/outline\";\nimport { DownloadIcon } from \"@heroicons/react/solid\";\nimport { forwardRef, useEffect, useState } from \"react\";\nimport DatePicker from \"react-datepicker\";\nimport axios from \"axios\";\nimport { compareAsc } from \"date-fns\";\nimport { useSelector } from \"react-redux\";\nimport Row from \"./row\";\nimport useFetch from \"../../../hooks/useFetch\";\nimport { states } from \"../../../helpers/equipment\";\nimport { getValue } from \"../../../helpers/table\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { backendUrl } from \"../../../config\";\nimport { tiposEquipos } from \"../../../helpers/staticData\";\n\nconst Table = ({ data, pagination, maxCantRow, changeData, sendToTrash }) => {\n  const userSelector = useSelector((store) => store.user);\n  const [isAllEquip, setIsAllEquip] = useState(false);\n  const [startDate, setStartDate] = useState(new Date());\n  const [endDate, setEndDate] = useState(null);\n  const [filtroEmpresa, setFiltroEmpresa] = useState(null);\n  const [filtroTipo, setFiltroTipo] = useState(null);\n  const [filtroLinea, setFiltroLinea] = useState(null);\n  const [filtroEstado, setFiltroEstado] = useState(null);\n\n  const { response: responseLinea } = useFetch({\n    url: `${backendUrl}/linea`,\n    options: {\n      headers: {\n        Authorization: `Bearer ${userSelector.user.jwtToken}`,\n      },\n    },\n    initData: [],\n  });\n  const { response: responseUsers } = useFetch({\n    url: `${backendUrl}/user`,\n    options: {\n      headers: {\n        Authorization: `Bearer ${userSelector.user.jwtToken}`,\n      },\n    },\n    initData: [],\n  });\n  const { response: responseEquipo } = useFetch({\n    url: `${backendUrl}/equipo`,\n    options: {\n      headers: {\n        Authorization: `Bearer ${userSelector.user.jwtToken}`,\n      },\n    },\n  });\n  const [empresas, setEmpresas] = useState([]);\n\n  const handleClickAllCheck = () => {\n    setIsAllEquip(!isAllEquip);\n  };\n\n  const handleFilterTable = ({ selectValue, property, date }) => {\n    let dataFiltered = responseEquipo;\n\n    if (filtroEmpresa) {\n      dataFiltered = [...responseEquipo].filter((equipo) => {\n        return equipo.empresa.name === filtroEmpresa;\n      });\n    }\n\n    if (filtroTipo) {\n      dataFiltered = [...responseEquipo].filter((equipo) => {\n        return equipo.tipo === filtroTipo;\n      });\n    }\n\n    if (filtroLinea) {\n      dataFiltered = [...responseEquipo].filter((equipo) => {\n        return equipo.linea.name === filtroLinea;\n      });\n    }\n\n    if (filtroEstado) {\n      dataFiltered = [...responseEquipo].filter((equipo) => {\n        return equipo.estado === filtroEstado;\n      });\n    }\n\n    if (date?.start && date?.end) {\n      dataFiltered = [...responseEquipo].filter((equipo) => {\n        const value = getValue(property, equipo);\n        const equipDate = new Date(value);\n        if (compareAsc(equipDate, date.start.setHours(0, 0, 0, 0)) === -1) {\n          return false;\n        }\n        if (compareAsc(date.end.setHours(23, 59, 59), equipDate) === -1) {\n          return false;\n        }\n        return equipo;\n      });\n    }\n\n    // if (selectValue || (date?.start && date?.end)) {\n    //   dataFiltered = [...responseEquipo].filter((equipo) => {\n    //     const value = getValue(property, equipo);\n    //     const equipDate = new Date(value);\n    //     if (date?.start && date?.end) {\n    //       if (compareAsc(equipDate, date.start.setHours(0, 0, 0, 0)) === -1) {\n    //         return false;\n    //       }\n    //       if (compareAsc(date.end.setHours(23, 59, 59), equipDate) === -1) {\n    //         return false;\n    //       }\n    //       return true;\n    //     }\n    //     return value === selectValue;\n    //   });\n    // }\n\n    changeData(dataFiltered);\n  };\n\n  const handleFiltroEstado = (value) => {\n    const val = value ? value : null;\n    setFiltroEstado(val);\n    handleFilterTable();\n  };\n\n  const handleFiltroEmpresa = (value) => {\n    const val = value ? value : null;\n    setFiltroEmpresa(val);\n    handleFilterTable();\n  };\n\n  const handleFiltroTipo = (value) => {\n    const val = value ? value : null;\n    setFiltroTipo(val);\n    handleFilterTable();\n  };\n\n  const handleFiltroLinea = (value) => {\n    const val = value ? value : null;\n    setFiltroLinea(val);\n    handleFilterTable();\n  };\n\n  const handleClickDownloadZip = () => {\n    const inputsDownloadZip = document.querySelectorAll(\n      \".input-check-downloadZip\"\n    );\n    const inputsDownloadTrue = Array.prototype.filter.call(\n      inputsDownloadZip,\n      (input) => input.checked\n    );\n    if (data) {\n      const idsToDownload = data.filter((user) => {\n        return inputsDownloadTrue.find((input) => input.value === user.id);\n      });\n      let keys = [];\n      for (let el of idsToDownload) {\n        if (el.historico) keys.push({ filename: el.historico });\n      }\n\n      axios({\n        url: `${backendUrl}/historico/zip`,\n        method: \"POST\",\n        headers: { Authorization: `Bearer ${userSelector.user.jwtToken}` },\n        data: {\n          keys: keys,\n        },\n        responseType: \"blob\", // important\n      }).then(({ data }) => {\n        const downloadUrl = window.URL.createObjectURL(\n          new Blob([data], { type: \"application/zip\" })\n        );\n        const link = document.createElement(\"a\");\n        link.href = downloadUrl;\n        link.setAttribute(\"download\", \"file.zip\"); //any other extension\n        document.body.appendChild(link);\n        link.click();\n        link.remove();\n      });\n    }\n  };\n\n  const onChangeDate = (dates) => {\n    const [start, end] = dates;\n    setStartDate(start);\n    setEndDate(end);\n    if (start && end) {\n      handleFilterTable({ property: \"createdAt\", date: { start, end } });\n    }\n    if (!end) {\n      changeData(responseEquipo);\n    }\n  };\n\n  useEffect(() => {\n    if (responseUsers.length) {\n      const empresas = [];\n      for (let i = 0; i < responseUsers.length; i++) {\n        const user = responseUsers[i];\n        if (user.role.toUpperCase() === \"EMPRESA\") {\n          if (!empresas.find((empresa) => empresa === user.name)) {\n            empresas.push(user.name);\n          }\n        }\n      }\n      setEmpresas(empresas);\n    }\n  }, [responseUsers]);\n\n  const CustomInputDate = forwardRef(({ value, onClick }, ref) => {\n    return (\n      <button\n        ref={ref}\n        onClick={onClick}\n        className=\"relative flex items-center text-sm font-objetive-bold text-app-green-3\"\n      >\n        <CalendarIcon className=\"w-6 h-6 mr-1\" />\n        <p>{endDate ? value : \"Fecha de mantenimiento\"}</p>\n        <ChevronDownIcon className=\"w-4 h-4 ml-1\" />\n      </button>\n    );\n  });\n\n  return (\n    <div>\n      <h1 className=\"mt-10 mb-6 text-xl font-objetive-bold\">\n        Listado de equipos\n      </h1>\n      <div className=\"flex justify-between mt-6 mb-14\">\n        <div className=\"flex items-center\">\n          <input\n            onChange={handleClickAllCheck}\n            type=\"checkbox\"\n            className=\"mb-1 bg-gray-400 border-2 rounded-sm input-check-downloadZip\"\n          />\n          <select\n            onChange={(e) =>\n              handleFilterTable({\n                selectValue: e.target.value,\n                property: \"empresa.name\",\n              })\n            }\n            className=\"text-sm text-center border-none font-objetive-bold text-app-green-3 hover:cursor-pointer\"\n          >\n            <option value=\"\">Empresa a cargo</option>\n            {empresas.map((empresa) => {\n              return (\n                <option key={`empresa-${empresa}`} value={empresa}>\n                  {empresa}\n                </option>\n              );\n            })}\n          </select>\n        </div>\n        <div className=\"flex items-center\">\n          <select\n            onChange={(e) =>\n              handleFilterTable({\n                selectValue: e.target.value,\n                property: \"tipo\",\n              })\n            }\n            className=\"text-sm text-center border-none font-objetive-bold text-app-green-3 hover:cursor-pointer\"\n          >\n            <option value=\"\">Tipo</option>\n            {tiposEquipos.map((equipo) => {\n              return (\n                <option key={`equipo-${equipo.id}`} value={equipo.id}>\n                  {equipo.name}\n                </option>\n              );\n            })}\n          </select>\n        </div>\n        <div className=\"flex items-center\">\n          <select\n            onChange={(e) =>\n              handleFilterTable({\n                selectValue: e.target.value,\n                property: \"linea.id\",\n              })\n            }\n            className=\"text-sm text-center border-none font-objetive-bold text-app-green-3 hover:cursor-pointer\"\n          >\n            <option value=\"\">LÃ­nea</option>\n            {responseLinea &&\n              responseLinea.map((linea) => {\n                return (\n                  <option key={`linea-${linea.id}`} value={linea.id}>\n                    {linea.name}\n                  </option>\n                );\n              })}\n          </select>\n        </div>\n        <div className=\"flex items-center\">\n          <select\n            onChange={(e) =>\n              handleFilterTable({\n                selectValue: e.target.value,\n                property: \"estado\",\n              })\n            }\n            className=\"w-40 text-sm text-center truncate border-none font-objetive-bold text-app-green-3 hover:cursor-pointer\"\n          >\n            <option value=\"\">Estado de equipo</option>\n            {states.map((state) => {\n              return (\n                <option key={`estado-${state}`} value={state}>\n                  {state}\n                </option>\n              );\n            })}\n          </select>\n        </div>\n        <div className=\"flex items-center\">\n          <DatePicker\n            selected={startDate}\n            onChange={onChangeDate}\n            selectsRange\n            startDate={startDate}\n            endDate={endDate}\n            customInput={<CustomInputDate />}\n          />\n        </div>\n        <div className=\"flex items-center mb-2\">\n          <button\n            onClick={handleClickDownloadZip}\n            className=\"relative px-10 py-2 text-sm rounded-full font-objetive-medium bg-app-green-1 text-app-green-3\"\n          >\n            <div className=\"absolute top-0 bottom-0 flex items-center -left-1\">\n              <DownloadIcon className=\"w-8 h-8 p-1 text-white rounded-full bg-app-green-3\" />\n            </div>\n            <p className=\"-mb-1\">Descargar .ZIP</p>\n          </button>\n        </div>\n      </div>\n      {data &&\n        data.map((user, index) => {\n          if (\n            index < maxCantRow * pagination &&\n            index >= pagination * maxCantRow - maxCantRow\n          ) {\n            return (\n              <Row\n                key={index + user.id}\n                user={user}\n                index={index}\n                isChecked={isAllEquip}\n                sendToTrash={sendToTrash}\n              />\n            );\n          }\n          return null;\n        })}\n    </div>\n  );\n};\n\nexport default Table;\n"]},"metadata":{},"sourceType":"module"}