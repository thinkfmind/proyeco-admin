{"ast":null,"code":"var _jsxFileName = \"/Users/augusto/Desktop/proyeco-front/src/components/users/table/equipos.js\",\n    _s = $RefreshSig$();\n\nimport { CalendarIcon, ChevronDownIcon } from \"@heroicons/react/outline\";\nimport { DownloadIcon } from \"@heroicons/react/solid\";\nimport { forwardRef, useEffect, useState } from \"react\";\nimport DatePicker from \"react-datepicker\";\nimport axios from \"axios\";\nimport { compareAsc } from \"date-fns\";\nimport { useSelector } from \"react-redux\";\nimport Row from \"./row\";\nimport useFetch from \"../../../hooks/useFetch\";\nimport { states } from \"../../../helpers/equipment\";\nimport { getValue } from \"../../../helpers/table\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { backendUrl } from \"../../../config\";\nimport { tiposEquipos } from \"../../../helpers/staticData\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Table = _ref => {\n  _s();\n\n  let {\n    data,\n    pagination,\n    maxCantRow,\n    changeData,\n    sendToTrash\n  } = _ref;\n  const userSelector = useSelector(store => store.user);\n  const [isAllEquip, setIsAllEquip] = useState(false);\n  const [startDate, setStartDate] = useState(new Date());\n  const [endDate, setEndDate] = useState(null);\n  const [filtroEmpresa, setFiltroEmpresa] = useState(null);\n  const [filtroTipo, setFiltroTipo] = useState(null);\n  const [filtroLinea, setFiltroLinea] = useState(null);\n  const [filtroEstado, setFiltroEstado] = useState(null);\n  const {\n    response: responseLinea\n  } = useFetch({\n    url: `${backendUrl}/linea`,\n    options: {\n      headers: {\n        Authorization: `Bearer ${userSelector.user.jwtToken}`\n      }\n    },\n    initData: []\n  });\n  const {\n    response: responseUsers\n  } = useFetch({\n    url: `${backendUrl}/user`,\n    options: {\n      headers: {\n        Authorization: `Bearer ${userSelector.user.jwtToken}`\n      }\n    },\n    initData: []\n  });\n  const {\n    response: responseEquipo\n  } = useFetch({\n    url: `${backendUrl}/equipo`,\n    options: {\n      headers: {\n        Authorization: `Bearer ${userSelector.user.jwtToken}`\n      }\n    }\n  });\n  const [empresas, setEmpresas] = useState([]);\n\n  const handleClickAllCheck = () => {\n    setIsAllEquip(!isAllEquip);\n  };\n\n  const handleFilterTable = (property, value, start, end) => {\n    let dataFiltered = responseEquipo;\n\n    if (filtroEmpresa || property === 'Empresa') {\n      if (property === 'Empresa') {\n        if (value !== 'blank') {\n          dataFiltered = [...dataFiltered].filter(equipo => {\n            return equipo.empresa.name === value;\n          });\n        }\n      } else {\n        if (filtroTipo !== 'blank') {\n          dataFiltered = [...dataFiltered].filter(equipo => {\n            return equipo.empresa.name === filtroEmpresa;\n          });\n        }\n      }\n    }\n\n    if (filtroTipo || property === 'Tipo') {\n      if (property === 'Tipo') {\n        if (value !== 'blank') {\n          dataFiltered = [...dataFiltered].filter(equipo => {\n            return equipo.tipo === value;\n          });\n        }\n      } else {\n        if (filtroTipo !== 'blank') {\n          dataFiltered = [...dataFiltered].filter(equipo => {\n            return equipo.tipo === filtroTipo;\n          });\n        }\n      }\n    }\n\n    if (filtroLinea || property === 'Linea') {\n      if (property === 'Linea') {\n        if (value !== 'blank') {\n          dataFiltered = [...dataFiltered].filter(equipo => {\n            return equipo.linea.id === value;\n          });\n        }\n      } else {\n        if (filtroLinea !== 'blank') {\n          dataFiltered = [...dataFiltered].filter(equipo => {\n            return equipo.linea.id === filtroLinea;\n          });\n        }\n      }\n    }\n\n    if (filtroEstado || property === 'Estado') {\n      if (property === 'Estado') {\n        if (value !== 'blank') {\n          dataFiltered = [...dataFiltered].filter(equipo => {\n            return equipo.estado === value;\n          });\n        }\n      } else {\n        if (filtroEstado !== 'blank') {\n          dataFiltered = [...dataFiltered].filter(equipo => {\n            return equipo.estado === filtroEstado;\n          });\n        }\n      }\n    }\n\n    if (start && end) {\n      dataFiltered = [...dataFiltered].filter(equipo => {\n        const equipDate = new Date(equipo.createdAt);\n\n        if (compareAsc(equipDate, start.setHours(0, 0, 0, 0)) === -1) {\n          return false;\n        }\n\n        if (compareAsc(end.setHours(23, 59, 59), equipDate) === -1) {\n          return false;\n        }\n\n        return equipo;\n      });\n    }\n\n    changeData(dataFiltered);\n  };\n\n  const handleFiltroEstado = value => {\n    const val = value ? value : 'blank';\n    setFiltroEstado(val);\n    handleFilterTable('Estado', val);\n  };\n\n  const handleFiltroEmpresa = value => {\n    const val = value ? value : 'blank';\n    setFiltroEmpresa(val);\n    handleFilterTable('Empresa', val);\n  };\n\n  const handleFiltroTipo = value => {\n    const val = value ? value : 'blank';\n    setFiltroTipo(val);\n    handleFilterTable('Tipo', val);\n  };\n\n  const handleFiltroLinea = value => {\n    const val = value ? value : 'blank';\n    setFiltroLinea(val);\n    handleFilterTable('Linea', val);\n  };\n\n  const handleClickDownloadZip = () => {\n    const inputsDownloadZip = document.querySelectorAll(\".input-check-downloadZip\");\n    const inputsDownloadTrue = Array.prototype.filter.call(inputsDownloadZip, input => input.checked);\n\n    if (data) {\n      const idsToDownload = data.filter(user => {\n        return inputsDownloadTrue.find(input => input.value === user.id);\n      });\n      let keys = [];\n\n      for (let el of idsToDownload) {\n        if (el.historico) keys.push({\n          filename: el.historico\n        });\n      }\n\n      axios({\n        url: `${backendUrl}/historico/zip`,\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${userSelector.user.jwtToken}`\n        },\n        data: {\n          keys: keys\n        },\n        responseType: \"blob\" // important\n\n      }).then(_ref2 => {\n        let {\n          data\n        } = _ref2;\n        const downloadUrl = window.URL.createObjectURL(new Blob([data], {\n          type: \"application/zip\"\n        }));\n        const link = document.createElement(\"a\");\n        link.href = downloadUrl;\n        link.setAttribute(\"download\", \"file.zip\"); //any other extension\n\n        document.body.appendChild(link);\n        link.click();\n        link.remove();\n      });\n    }\n  };\n\n  const onChangeDate = dates => {\n    const [start, end] = dates;\n    setStartDate(start);\n    setEndDate(end);\n\n    if (start && end) {\n      handleFilterTable(null, null, start, end);\n    }\n\n    if (!end) {\n      handleFilterTable();\n    }\n  };\n\n  useEffect(() => {\n    if (responseUsers.length) {\n      const empresas = [];\n\n      for (let i = 0; i < responseUsers.length; i++) {\n        const user = responseUsers[i];\n\n        if (user.role.toUpperCase() === \"EMPRESA\") {\n          if (!empresas.find(empresa => empresa === user.name)) {\n            empresas.push(user.name);\n          }\n        }\n      }\n\n      setEmpresas(empresas);\n    }\n  }, [responseUsers]);\n  const CustomInputDate = /*#__PURE__*/forwardRef((_ref3, ref) => {\n    let {\n      value,\n      onClick\n    } = _ref3;\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      ref: ref,\n      onClick: onClick,\n      className: \"relative flex items-center text-sm font-objetive-bold text-app-green-3\",\n      children: [/*#__PURE__*/_jsxDEV(CalendarIcon, {\n        className: \"w-6 h-6 mr-1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: endDate ? value : \"Fecha de mantenimiento\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ChevronDownIcon, {\n        className: \"w-4 h-4 ml-1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }, this);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"mt-10 mb-6 text-xl font-objetive-bold\",\n      children: \"Listado de equipos\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between mt-6 mb-14\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: handleClickAllCheck,\n          type: \"checkbox\",\n          className: \"mb-1 bg-gray-400 border-2 rounded-sm input-check-downloadZip\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          onChange: e => handleFiltroEmpresa(e.target.value),\n          className: \"text-sm text-center border-none font-objetive-bold text-app-green-3 hover:cursor-pointer\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Empresa a cargo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this), empresas.map(empresa => {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: empresa,\n              children: empresa\n            }, `empresa-${empresa}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 17\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: /*#__PURE__*/_jsxDEV(\"select\", {\n          onChange: e => handleFiltroTipo(e.target.value),\n          className: \"text-sm text-center border-none font-objetive-bold text-app-green-3 hover:cursor-pointer\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Tipo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this), tiposEquipos.map(equipo => {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: equipo.id,\n              children: equipo.name\n            }, `equipo-${equipo.id}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 17\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: /*#__PURE__*/_jsxDEV(\"select\", {\n          onChange: e => handleFiltroLinea(e.target.value),\n          className: \"text-sm text-center border-none font-objetive-bold text-app-green-3 hover:cursor-pointer\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"L\\xEDnea\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 13\n          }, this), responseLinea && responseLinea.map(linea => {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: linea.id,\n              children: linea.name\n            }, `linea-${linea.id}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 19\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: /*#__PURE__*/_jsxDEV(\"select\", {\n          onChange: e => handleFiltroEstado(e.target.value),\n          className: \"w-40 text-sm text-center truncate border-none font-objetive-bold text-app-green-3 hover:cursor-pointer\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Estado de equipo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 13\n          }, this), states.map(state => {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: state,\n              children: state\n            }, `estado-${state}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 17\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: /*#__PURE__*/_jsxDEV(DatePicker, {\n          selected: startDate,\n          onChange: onChangeDate,\n          selectsRange: true,\n          startDate: startDate,\n          endDate: endDate,\n          customInput: /*#__PURE__*/_jsxDEV(CustomInputDate, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 26\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center mb-2\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleClickDownloadZip,\n          className: \"relative px-10 py-2 text-sm rounded-full font-objetive-medium bg-app-green-1 text-app-green-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute top-0 bottom-0 flex items-center -left-1\",\n            children: /*#__PURE__*/_jsxDEV(DownloadIcon, {\n              className: \"w-8 h-8 p-1 text-white rounded-full bg-app-green-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"-mb-1\",\n            children: \"Descargar .ZIP\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this), data && data.map((user, index) => {\n      if (index < maxCantRow * pagination && index >= pagination * maxCantRow - maxCantRow) {\n        return /*#__PURE__*/_jsxDEV(Row, {\n          user: user,\n          index: index,\n          isChecked: isAllEquip,\n          sendToTrash: sendToTrash\n        }, index + user.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 15\n        }, this);\n      }\n\n      return null;\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 248,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Table, \"SP9Lb1M2rtxYXBEGGn4fHrWIBH0=\", false, function () {\n  return [useSelector, useFetch, useFetch, useFetch];\n});\n\n_c = Table;\nexport default Table;\n\nvar _c;\n\n$RefreshReg$(_c, \"Table\");","map":{"version":3,"sources":["/Users/augusto/Desktop/proyeco-front/src/components/users/table/equipos.js"],"names":["CalendarIcon","ChevronDownIcon","DownloadIcon","forwardRef","useEffect","useState","DatePicker","axios","compareAsc","useSelector","Row","useFetch","states","getValue","backendUrl","tiposEquipos","Table","data","pagination","maxCantRow","changeData","sendToTrash","userSelector","store","user","isAllEquip","setIsAllEquip","startDate","setStartDate","Date","endDate","setEndDate","filtroEmpresa","setFiltroEmpresa","filtroTipo","setFiltroTipo","filtroLinea","setFiltroLinea","filtroEstado","setFiltroEstado","response","responseLinea","url","options","headers","Authorization","jwtToken","initData","responseUsers","responseEquipo","empresas","setEmpresas","handleClickAllCheck","handleFilterTable","property","value","start","end","dataFiltered","filter","equipo","empresa","name","tipo","linea","id","estado","equipDate","createdAt","setHours","handleFiltroEstado","val","handleFiltroEmpresa","handleFiltroTipo","handleFiltroLinea","handleClickDownloadZip","inputsDownloadZip","document","querySelectorAll","inputsDownloadTrue","Array","prototype","call","input","checked","idsToDownload","find","keys","el","historico","push","filename","method","responseType","then","downloadUrl","window","URL","createObjectURL","Blob","type","link","createElement","href","setAttribute","body","appendChild","click","remove","onChangeDate","dates","length","i","role","toUpperCase","CustomInputDate","ref","onClick","e","target","map","state","index"],"mappings":"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","sourcesContent":["import { CalendarIcon, ChevronDownIcon } from \"@heroicons/react/outline\";\nimport { DownloadIcon } from \"@heroicons/react/solid\";\nimport { forwardRef, useEffect, useState } from \"react\";\nimport DatePicker from \"react-datepicker\";\nimport axios from \"axios\";\nimport { compareAsc } from \"date-fns\";\nimport { useSelector } from \"react-redux\";\nimport Row from \"./row\";\nimport useFetch from \"../../../hooks/useFetch\";\nimport { states } from \"../../../helpers/equipment\";\nimport { getValue } from \"../../../helpers/table\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { backendUrl } from \"../../../config\";\nimport { tiposEquipos } from \"../../../helpers/staticData\";\n\nconst Table = ({ data, pagination, maxCantRow, changeData, sendToTrash }) => {\n  const userSelector = useSelector((store) => store.user);\n  const [isAllEquip, setIsAllEquip] = useState(false);\n  const [startDate, setStartDate] = useState(new Date());\n  const [endDate, setEndDate] = useState(null);\n  const [filtroEmpresa, setFiltroEmpresa] = useState(null);\n  const [filtroTipo, setFiltroTipo] = useState(null);\n  const [filtroLinea, setFiltroLinea] = useState(null);\n  const [filtroEstado, setFiltroEstado] = useState(null);\n\n  const { response: responseLinea } = useFetch({\n    url: `${backendUrl}/linea`,\n    options: {\n      headers: {\n        Authorization: `Bearer ${userSelector.user.jwtToken}`,\n      },\n    },\n    initData: [],\n  });\n  const { response: responseUsers } = useFetch({\n    url: `${backendUrl}/user`,\n    options: {\n      headers: {\n        Authorization: `Bearer ${userSelector.user.jwtToken}`,\n      },\n    },\n    initData: [],\n  });\n  const { response: responseEquipo } = useFetch({\n    url: `${backendUrl}/equipo`,\n    options: {\n      headers: {\n        Authorization: `Bearer ${userSelector.user.jwtToken}`,\n      },\n    },\n  });\n  const [empresas, setEmpresas] = useState([]);\n\n  const handleClickAllCheck = () => {\n    setIsAllEquip(!isAllEquip);\n  };\n\n  const handleFilterTable = (property, value, start, end) => {\n    let dataFiltered = responseEquipo;\n\n    if (filtroEmpresa || property === 'Empresa') {\n      if(property === 'Empresa') {\n        if(value !== 'blank') {\n          dataFiltered = [...dataFiltered].filter((equipo) => {\n            return equipo.empresa.name === value;\n          });\n        }\n      } else {\n        if(filtroTipo !== 'blank') {\n          dataFiltered = [...dataFiltered].filter((equipo) => {\n            return equipo.empresa.name === filtroEmpresa;\n          });\n        }\n      }\n    }\n\n    if (filtroTipo || property === 'Tipo') {\n      if(property === 'Tipo') {\n        if(value !== 'blank') {\n          dataFiltered = [...dataFiltered].filter((equipo) => {\n            return equipo.tipo === value;\n          });\n        }\n      } else {\n        if(filtroTipo !== 'blank') {\n          dataFiltered = [...dataFiltered].filter((equipo) => {\n            return equipo.tipo === filtroTipo;\n          });\n        }\n      }\n    }\n\n    if (filtroLinea || property === 'Linea') {\n      if(property === 'Linea') {\n        if(value !== 'blank') {\n          dataFiltered = [...dataFiltered].filter((equipo) => {\n            return equipo.linea.id === value;\n          });\n        }\n      } else {\n        if(filtroLinea !== 'blank') {\n          dataFiltered = [...dataFiltered].filter((equipo) => {\n            return equipo.linea.id === filtroLinea;\n          });\n        }\n      }\n      \n    }\n\n    if (filtroEstado || property === 'Estado') {\n      if(property === 'Estado') {\n        if(value !== 'blank') {\n          dataFiltered = [...dataFiltered].filter((equipo) => {\n            return equipo.estado === value;\n          });\n        }\n      } else {\n        if(filtroEstado !== 'blank') {\n          dataFiltered = [...dataFiltered].filter((equipo) => {\n            return equipo.estado === filtroEstado;\n          });\n        }\n      }\n\n    }\n\n    if (start && end) {\n      dataFiltered = [...dataFiltered].filter((equipo) => {\n        const equipDate = new Date(equipo.createdAt);\n        if (compareAsc(equipDate, start.setHours(0, 0, 0, 0)) === -1) {\n          return false;\n        }\n        if (compareAsc(end.setHours(23, 59, 59), equipDate) === -1) {\n          return false;\n        }\n        return equipo;\n      });\n    }\n\n    changeData(dataFiltered);\n  };\n\n  const handleFiltroEstado = (value) => {\n    const val = value ? value : 'blank';\n    setFiltroEstado(val);\n    handleFilterTable('Estado', val);\n  };\n\n  const handleFiltroEmpresa = (value) => {\n    const val = value ? value : 'blank';\n    setFiltroEmpresa(val);\n    handleFilterTable('Empresa', val);\n  };\n\n  const handleFiltroTipo = (value) => {\n    const val = value ? value : 'blank';\n    setFiltroTipo(val);\n    handleFilterTable('Tipo', val);\n  };\n\n  const handleFiltroLinea = (value) => {\n    const val = value ? value : 'blank';\n    setFiltroLinea(val);\n    handleFilterTable('Linea', val);\n  };\n\n  const handleClickDownloadZip = () => {\n    const inputsDownloadZip = document.querySelectorAll(\n      \".input-check-downloadZip\"\n    );\n    const inputsDownloadTrue = Array.prototype.filter.call(\n      inputsDownloadZip,\n      (input) => input.checked\n    );\n    if (data) {\n      const idsToDownload = data.filter((user) => {\n        return inputsDownloadTrue.find((input) => input.value === user.id);\n      });\n      let keys = [];\n      for (let el of idsToDownload) {\n        if (el.historico) keys.push({ filename: el.historico });\n      }\n\n      axios({\n        url: `${backendUrl}/historico/zip`,\n        method: \"POST\",\n        headers: { Authorization: `Bearer ${userSelector.user.jwtToken}` },\n        data: {\n          keys: keys,\n        },\n        responseType: \"blob\", // important\n      }).then(({ data }) => {\n        const downloadUrl = window.URL.createObjectURL(\n          new Blob([data], { type: \"application/zip\" })\n        );\n        const link = document.createElement(\"a\");\n        link.href = downloadUrl;\n        link.setAttribute(\"download\", \"file.zip\"); //any other extension\n        document.body.appendChild(link);\n        link.click();\n        link.remove();\n      });\n    }\n  };\n\n  const onChangeDate = (dates) => {\n    const [start, end] = dates;\n    setStartDate(start);\n    setEndDate(end);\n    if (start && end) {\n      handleFilterTable(null, null, start, end);\n    }\n    if (!end) {\n      handleFilterTable();\n    }\n  };\n\n  useEffect(() => {\n    if (responseUsers.length) {\n      const empresas = [];\n      for (let i = 0; i < responseUsers.length; i++) {\n        const user = responseUsers[i];\n        if (user.role.toUpperCase() === \"EMPRESA\") {\n          if (!empresas.find((empresa) => empresa === user.name)) {\n            empresas.push(user.name);\n          }\n        }\n      }\n      setEmpresas(empresas);\n    }\n  }, [responseUsers]);\n\n  const CustomInputDate = forwardRef(({ value, onClick }, ref) => {\n    return (\n      <button\n        ref={ref}\n        onClick={onClick}\n        className=\"relative flex items-center text-sm font-objetive-bold text-app-green-3\"\n      >\n        <CalendarIcon className=\"w-6 h-6 mr-1\" />\n        <p>{endDate ? value : \"Fecha de mantenimiento\"}</p>\n        <ChevronDownIcon className=\"w-4 h-4 ml-1\" />\n      </button>\n    );\n  });\n\n  return (\n    <div>\n      <h1 className=\"mt-10 mb-6 text-xl font-objetive-bold\">\n        Listado de equipos\n      </h1>\n      <div className=\"flex justify-between mt-6 mb-14\">\n        <div className=\"flex items-center\">\n          <input\n            onChange={handleClickAllCheck}\n            type=\"checkbox\"\n            className=\"mb-1 bg-gray-400 border-2 rounded-sm input-check-downloadZip\"\n          />\n          <select\n            onChange={(e) => handleFiltroEmpresa(e.target.value)}\n            className=\"text-sm text-center border-none font-objetive-bold text-app-green-3 hover:cursor-pointer\"\n          >\n            <option value=\"\">Empresa a cargo</option>\n            {empresas.map((empresa) => {\n              return (\n                <option key={`empresa-${empresa}`} value={empresa}>\n                  {empresa}\n                </option>\n              );\n            })}\n          </select>\n        </div>\n        <div className=\"flex items-center\">\n          <select\n            onChange={(e) => handleFiltroTipo(e.target.value)}\n            className=\"text-sm text-center border-none font-objetive-bold text-app-green-3 hover:cursor-pointer\"\n          >\n            <option value=\"\">Tipo</option>\n            {tiposEquipos.map((equipo) => {\n              return (\n                <option key={`equipo-${equipo.id}`} value={equipo.id}>\n                  {equipo.name}\n                </option>\n              );\n            })}\n          </select>\n        </div>\n        <div className=\"flex items-center\">\n          <select\n            onChange={(e) => handleFiltroLinea(e.target.value)}\n            className=\"text-sm text-center border-none font-objetive-bold text-app-green-3 hover:cursor-pointer\"\n          >\n            <option value=\"\">Línea</option>\n            {responseLinea &&\n              responseLinea.map((linea) => {\n                return (\n                  <option key={`linea-${linea.id}`} value={linea.id}>\n                    {linea.name}\n                  </option>\n                );\n              })}\n          </select>\n        </div>\n        <div className=\"flex items-center\">\n          <select\n            onChange={(e) => handleFiltroEstado(e.target.value)}\n            className=\"w-40 text-sm text-center truncate border-none font-objetive-bold text-app-green-3 hover:cursor-pointer\"\n          >\n            <option value=\"\">Estado de equipo</option>\n            {states.map((state) => {\n              return (\n                <option key={`estado-${state}`} value={state}>\n                  {state}\n                </option>\n              );\n            })}\n          </select>\n        </div>\n        <div className=\"flex items-center\">\n          <DatePicker\n            selected={startDate}\n            onChange={onChangeDate}\n            selectsRange\n            startDate={startDate}\n            endDate={endDate}\n            customInput={<CustomInputDate />}\n          />\n        </div>\n        <div className=\"flex items-center mb-2\">\n          <button\n            onClick={handleClickDownloadZip}\n            className=\"relative px-10 py-2 text-sm rounded-full font-objetive-medium bg-app-green-1 text-app-green-3\"\n          >\n            <div className=\"absolute top-0 bottom-0 flex items-center -left-1\">\n              <DownloadIcon className=\"w-8 h-8 p-1 text-white rounded-full bg-app-green-3\" />\n            </div>\n            <p className=\"-mb-1\">Descargar .ZIP</p>\n          </button>\n        </div>\n      </div>\n      {data &&\n        data.map((user, index) => {\n          if (\n            index < maxCantRow * pagination &&\n            index >= pagination * maxCantRow - maxCantRow\n          ) {\n            return (\n              <Row\n                key={index + user.id}\n                user={user}\n                index={index}\n                isChecked={isAllEquip}\n                sendToTrash={sendToTrash}\n              />\n            );\n          }\n          return null;\n        })}\n    </div>\n  );\n};\n\nexport default Table;\n"]},"metadata":{},"sourceType":"module"}